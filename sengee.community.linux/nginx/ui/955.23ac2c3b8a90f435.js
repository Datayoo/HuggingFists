"use strict";(self.webpackChunksengee_ui=self.webpackChunksengee_ui||[]).push([[955],{4955:(mt,P,s)=>{s.r(P),s.d(P,{MainModule:()=>pt});var u=s(7152),c=s(2545),w=s(6351),I=s(2886),t=s(5e3),O=s(4219),f=s(2683),d=s(9445);function J(o,i){1&o&&(t.TgZ(0,"li",7),t._uU(1),t.ALo(2,"nzI18n"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"menu.cluster")," "))}function q(o,i){1&o&&(t.TgZ(0,"li",8),t._uU(1),t.ALo(2,"nzI18n"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"menu.worknode")," "))}function L(o,i){1&o&&(t.TgZ(0,"li",9),t._uU(1),t.ALo(2,"nzI18n"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"menu.setting")," "))}let Q=(()=>{class o{constructor(n,e){this.route=n,this.helper=e}ngOnInit(){this.helper.defaultEnter(this.route),this.subscription=this.helper.simulateReuse(this.route)}ngOnDestroy(){this.subscription.unsubscribe()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(u.gz),t.Y36(c.$J))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-environment"]],decls:8,vars:3,consts:[[1,"tab-menu-box"],[1,"menu"],["nz-menu",""],["nz-menu-item","","nzMatchRouter","","routerLink","./cluster",4,"authx"],["nz-menu-item","","nzMatchRouter","","routerLink","./worknode",4,"authx"],["nz-menu-item","","nzMatchRouter","","routerLink","./service",4,"authx"],[1,"content"],["nz-menu-item","","nzMatchRouter","","routerLink","./cluster"],["nz-menu-item","","nzMatchRouter","","routerLink","./worknode"],["nz-menu-item","","nzMatchRouter","","routerLink","./service"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"ul",2),t.YNc(3,J,3,3,"li",3),t.YNc(4,q,3,3,"li",4),t.YNc(5,L,3,3,"li",5),t.qZA()(),t.TgZ(6,"div",6),t._UZ(7,"dy-router-outlet"),t.qZA()()),2&n&&(t.xp6(3),t.Q6J("authx","Environment.Cluster"),t.xp6(1),t.Q6J("authx","Environment.Worknode"),t.xp6(1),t.Q6J("authx","Environment.Service"))},directives:[O.wO,c.xo,f.w,O.r9,u.rH,c.Fr],pipes:[d.o9],encapsulation:2}),o})();var U=s(8076),C=s(9727),h=s(489),g=s(1453),N=s(404),M=s(2394),_=s(9808),D=s(8452);let $=(()=>{class o{constructor(n){this.api=n,this.columns=[{i18n:"\u8282\u70b9\u6807\u7b7e",field:"nodeLabels"},{i18n:"PACK",field:"rack"},{i18n:"\u72b6\u6001",field:"state"},{i18n:"\u5730\u5740",field:"address"},{i18n:"\u5bb9\u5668\u6570",field:"containers"},{i18n:"\u5df2\u7528\u5185\u5b58",field:"usedMemSize"},{i18n:"\u53ef\u7528\u5185\u5b58",field:"availableMemSize"},{i18n:"\u5df2\u7528CPU\u6838\u5fc3\u6570",field:"usedVCores"},{i18n:"\u53ef\u7528CPU\u6838\u5fc3\u6570",field:"availableVCores"}],this.close=new t.vpe,this.queueColumn=[{i18n:"\u5c5e\u6027\u540d",field:"name"},{i18n:"\u5c5e\u6027\u503c",field:"value"}]}ngOnInit(){this.api.getClusterNodes(this.cluster.id).subscribe(n=>{this.data=n}),this.api.getClusterQueues(this.cluster.id).subscribe(n=>{this.queueTree=this.parseQueueTree(n),this.queueTree.length&&(this.selectedKeys=[this.queueTree[0].key])&&this.parseQueueData(this.queueTree[0])}),this.api.getClusterInfo(this.cluster.id).subscribe(n=>{this.clusterInfo=n})}searchHandler(n){}treeClick(n){this.parseQueueData(n.node.origin)}parseQueueTree(n,e=0){return n.map((a,l)=>(a.title=a.name,a.key=a.name+e+l,a.children=this.parseQueueTree(a.childQueues,e+1),a))}parseQueueData(n){const e=[];e.push({name:"\u8282\u70b9\u6807\u7b7e",value:n.nodeLabels}),e.push({name:"\u6700\u5927\u5e76\u884c\u5e94\u7528\u6570",value:n.maxApplications}),n.capacityResourceQuota&&(e.push({name:"\u5b58\u50a8\u7684\u96c6\u7fa4\u5360\u6bd4",value:n.capacityResourceQuota.capacity}),e.push({name:"\u6700\u5927\u5b58\u50a8\u5360\u6bd4",value:n.capacityResourceQuota.maxCapacity}),e.push({name:"\u5b58\u50a8\u7edd\u5bf9\u5360\u6bd4",value:n.capacityResourceQuota.absoluteCapacity}),e.push({name:"\u5b58\u50a8\u6700\u5927\u7edd\u5bf9\u5360\u6bd4",value:n.capacityResourceQuota.absoluteMaxCapacity})),n.quantifyResourceQuota&&(e.push({name:"\u53ef\u7528\u5185\u5b58",value:n.quantifyResourceQuota.memSize+" MB"}),e.push({name:"\u53ef\u7528CPU",value:n.quantifyResourceQuota.vCores}),e.push({name:"\u6700\u5927\u53ef\u7528\u5185\u5b58",value:n.quantifyResourceQuota.maxMemSize+" MB"}),e.push({name:"\u6700\u5927\u53ef\u7528CPU",value:n.quantifyResourceQuota.maxVCores})),this.queueData=e}goTo(){this.close.emit()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(h.JL))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-cluster-detail"]],inputs:{cluster:"cluster"},outputs:{close:"close"},decls:64,vars:20,consts:[[1,"cluster-detail","pa"],[1,"toolbar"],[1,"sub-title","pr"],["dy-icon","","type","return",3,"click"],[1,"detail-box"],[1,"top-box"],[1,"item"],[1,"icon-box"],["dy-icon","","type","huodongjiedian"],[1,"num-box"],[1,"num"],[1,"label"],["dy-icon","","type","neicun"],[1,"line"],[1,"other-box"],["dy-icon","","type","cpu"],[1,"bottom-box"],[3,"alias"],[1,"tab-content"],[3,"columns","data"],["table",""],[1,"left-box","fl"],[1,"title"],[1,"content"],[3,"search"],[3,"nzData","nzSelectedKeys","nzClick"],[1,"right-box","fr"],[3,"data","columns"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span",2),t._uU(3),t.qZA(),t.TgZ(4,"i",3),t.NdJ("click",function(){return e.goTo()}),t.qZA()(),t.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"span",7),t._UZ(9,"i",8),t.qZA(),t.TgZ(10,"span",9)(11,"span",10),t._uU(12),t.qZA(),t._UZ(13,"br"),t.TgZ(14,"span",11),t._uU(15,"\u6d3b\u52a8\u8282\u70b9"),t.qZA()()(),t.TgZ(16,"div",6)(17,"span",7),t._UZ(18,"i",12),t.qZA(),t.TgZ(19,"span",9)(20,"span",10),t._uU(21),t.qZA(),t._UZ(22,"br"),t.TgZ(23,"span",11),t._uU(24,"\u5185\u5b58\u603b\u91cf"),t.qZA()(),t._UZ(25,"span",13),t.TgZ(26,"span",14)(27,"p"),t._uU(28),t.qZA(),t.TgZ(29,"p"),t._uU(30),t.qZA()()(),t.TgZ(31,"div",6)(32,"span",7),t._UZ(33,"i",15),t.qZA(),t.TgZ(34,"span",9)(35,"span",10),t._uU(36),t.qZA(),t._UZ(37,"br"),t.TgZ(38,"span",11),t._uU(39,"CPU\u603b\u6838\u5fc3\u6570"),t.qZA()(),t._UZ(40,"span",13),t.TgZ(41,"span",14)(42,"p"),t._uU(43),t.qZA(),t.TgZ(44,"p"),t._uU(45),t.qZA()()()(),t.TgZ(46,"div",16)(47,"dy-tabs")(48,"dy-tab",17),t.ALo(49,"nzI18n"),t.TgZ(50,"div",18),t._UZ(51,"app-table",19,20),t.qZA()(),t.TgZ(53,"dy-tab",17),t.ALo(54,"nzI18n"),t.TgZ(55,"div",18)(56,"div",21)(57,"div",22),t._uU(58,"\u961f\u5217\u5217\u8868"),t.qZA(),t.TgZ(59,"div",23)(60,"dy-search",24),t.NdJ("search",function(l){return e.searchHandler(l)}),t.qZA(),t.TgZ(61,"nz-tree",25),t.NdJ("nzClick",function(l){return e.treeClick(l)}),t.qZA()()(),t.TgZ(62,"div",26),t._UZ(63,"app-table",27),t.qZA()()()()()()()),2&n&&(t.xp6(3),t.Oqu(null==e.cluster?null:e.cluster.alias),t.xp6(9),t.Oqu(null==e.clusterInfo?null:e.clusterInfo.containers),t.xp6(9),t.hij("",(null==e.clusterInfo?null:e.clusterInfo.usedMemSize)+(null==e.clusterInfo?null:e.clusterInfo.availableMemSize)," MB"),t.xp6(7),t.hij("\u5df2\u7528\uff1a",null==e.clusterInfo?null:e.clusterInfo.usedMemSize," MB"),t.xp6(2),t.hij("\u672a\u7528\uff1a",null==e.clusterInfo?null:e.clusterInfo.availableMemSize," MB"),t.xp6(6),t.Oqu((null==e.clusterInfo?null:e.clusterInfo.usedVCores)+(null==e.clusterInfo?null:e.clusterInfo.availableVCores)),t.xp6(7),t.hij("\u5df2\u7528\uff1a",null==e.clusterInfo?null:e.clusterInfo.usedVCores,""),t.xp6(2),t.hij("\u672a\u7528\uff1a",null==e.clusterInfo?null:e.clusterInfo.availableVCores,""),t.xp6(3),t.Q6J("alias",t.lcZ(49,16,"\u8282\u70b9")),t.xp6(3),t.Q6J("columns",e.columns)("data",e.data),t.xp6(2),t.Q6J("alias",t.lcZ(54,18,"\u961f\u5217")),t.xp6(8),t.Q6J("nzData",e.queueTree)("nzSelectedKeys",e.selectedKeys),t.xp6(2),t.Q6J("data",e.queueData)("columns",e.queueColumn))},directives:[g.kE,g.RG,g.MR,M.a,g.J3,D.Hc],pipes:[d.o9],styles:['html.default[_ngcontent-%COMP%]   html[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   body[_ngcontent-%COMP%]{min-width:1366px}html.default[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none}html.default[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin:0}html.default[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;flex:auto;flex-direction:column}html.default[_ngcontent-%COMP%]   .fdc[_ngcontent-%COMP%]{flex-direction:column}html.default[_ngcontent-%COMP%]   .fdr[_ngcontent-%COMP%]{flex-direction:row}html.default[_ngcontent-%COMP%]   .fauto[_ngcontent-%COMP%]{flex:auto}html.default[_ngcontent-%COMP%]   .pf[_ngcontent-%COMP%]{position:fixed}html.default[_ngcontent-%COMP%]   .pr[_ngcontent-%COMP%]{position:relative}html.default[_ngcontent-%COMP%]   .pa[_ngcontent-%COMP%]{position:absolute}html.default[_ngcontent-%COMP%]   .fl[_ngcontent-%COMP%]{float:left}html.default[_ngcontent-%COMP%]   .fr[_ngcontent-%COMP%]{float:right}html.default[_ngcontent-%COMP%]   .clear-f[_ngcontent-%COMP%]{clear:both}html.default[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#396669}html.default[_ngcontent-%COMP%]   .ant-table-pagination.ant-pagination[_ngcontent-%COMP%]{margin:0}html.default[_ngcontent-%COMP%]   .ant-pagination[_ngcontent-%COMP%]{text-align:right}html.default[_ngcontent-%COMP%]   .ant-table-column-sorter[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-table-filter-trigger[_ngcontent-%COMP%]{color:#a1a1a1}html.default[_ngcontent-%COMP%]   .ant-table-filter-trigger.active[_ngcontent-%COMP%]{color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-table-thead[_ngcontent-%COMP%]   th.ant-table-column-sort[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-table-thead[_ngcontent-%COMP%]   th.ant-table-column-has-sorters[_ngcontent-%COMP%]:hover{background:#e2eeee}html.default[_ngcontent-%COMP%]   .ant-tree-switcher[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-tree-indent-unit[_ngcontent-%COMP%]{width:17px;color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-tree[_ngcontent-%COMP%]   .ant-tree-node-content-wrapper[_ngcontent-%COMP%]{padding:0}html.default[_ngcontent-%COMP%]   .ant-tree-checkbox-inner[_ngcontent-%COMP%]{display:inline-block}html.default[_ngcontent-%COMP%]   .ant-select-tree[_ngcontent-%COMP%]   .ant-select-tree-node-content-wrapper.ant-select-tree-node-selected[_ngcontent-%COMP%]:hover{background-color:#e2eeee}html.default[_ngcontent-%COMP%]   .ant-modal-title[_ngcontent-%COMP%]{color:#396669}html.default[_ngcontent-%COMP%]   .ant-dropdown-menu-item-selected[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-dropdown-menu-submenu-title-selected[_ngcontent-%COMP%]{background-color:#e2eeee}html.default[_ngcontent-%COMP%]   .ant-badge-status-processing[_ngcontent-%COMP%]{background-color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-badge-status-processing[_ngcontent-%COMP%]:after{border-color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-tooltip[_ngcontent-%COMP%]{max-width:550px;max-height:550px;overflow:hidden}html.default[_ngcontent-%COMP%]   .ant-tooltip-content[_ngcontent-%COMP%]{width:100%;height:100%;max-width:550px;max-height:542px}html.default[_ngcontent-%COMP%]   .ant-tooltip-inner[_ngcontent-%COMP%]{box-shadow:none}html.default   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#fbffff;left:0;top:0;z-index:2}html.default   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{margin:0 15px;border-bottom:solid 1px #dbe9ea}html.default   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]{font-size:16px;color:#2a8b92;padding-left:10px}html.default   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:5px;width:5px;height:15px;background-color:#2a8b92}html.default   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]{width:100%;height:calc(100% - 45px);padding:15px;border-radius:2px}html.default   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .top-box[_ngcontent-%COMP%]{width:100%;height:150px;padding:10px 0 25px}html.default   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .top-box[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:inline-flex;height:100%;border:dashed 1px #2a8b92;border-radius:4px;margin-right:50px;justify-content:center;align-items:center;padding:0 40px;color:#2a8b92}html.default   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .top-box[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .icon-box[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;border:dashed 1px #2a8b92;font-size:46px;display:inline-flex;align-items:center;justify-content:center;margin-right:20px}html.default   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .top-box[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .num-box[_ngcontent-%COMP%]{text-align:center}html.default   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .top-box[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .num-box[_ngcontent-%COMP%]   .num[_ngcontent-%COMP%]{font-size:34px}html.default   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .top-box[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .num-box[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:16px}html.default   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .top-box[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{margin:0 20px;border-left:solid 1px #2a8b92;height:70px}html.default   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .top-box[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .other-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;margin-top:8px}html.default   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .bottom-box[_ngcontent-%COMP%]{width:100%;height:calc(100% - 150px)}html.default   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .bottom-box[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding-top:15px;height:calc(100% - 32px)}html.default   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .bottom-box[_ngcontent-%COMP%]     .dy-tabs{height:100%}html.default   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .bottom-box[_ngcontent-%COMP%]     .dy-tabs-header{padding:0 0 8px;width:100%;background-color:#fbffff;border-bottom:solid 1px #dbe9ea}html.default   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .bottom-box[_ngcontent-%COMP%]     .dy-tabs-header-item.active{position:relative}html.default   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .bottom-box[_ngcontent-%COMP%]     .dy-tabs-header-item.active:after{content:"";position:absolute;width:100%;height:2px;background-color:#2a8b92;left:0;bottom:-9px}html.default   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .bottom-box[_ngcontent-%COMP%]   .left-box[_ngcontent-%COMP%]{width:200px;height:100%}html.default   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .bottom-box[_ngcontent-%COMP%]   .left-box[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:100%;height:23px;line-height:23px;padding-left:8px;background-color:#c8dde0;white-space:nowrap;color:#396669}html.default   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .bottom-box[_ngcontent-%COMP%]   .left-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:8px;width:100%;height:calc(100% - 23px);overflow:auto;background:#f7fdfd}html.default   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .bottom-box[_ngcontent-%COMP%]   .left-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]     .dy-search{margin-bottom:5px}html.default   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .bottom-box[_ngcontent-%COMP%]   .left-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]     .ant-tree .ant-tree-node-content-wrapper{width:100%;padding:0 5px}html.default   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .bottom-box[_ngcontent-%COMP%]   .left-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]     .ant-tree .ant-tree-node-content-wrapper.ant-tree-node-selected{color:#2a8b92;background-color:#e2eeee}html.default   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .bottom-box[_ngcontent-%COMP%]   .right-box[_ngcontent-%COMP%]{width:calc(100% - 215px);height:100%;overflow-y:auto}html.dark   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#fbfcff;left:0;top:0;z-index:2}html.dark   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{margin:0 15px;border-bottom:solid 1px #dbe9ea}html.dark   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]{font-size:16px;color:#275184;padding-left:10px}html.dark   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:5px;width:5px;height:15px;background-color:#275184}html.dark   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]{width:100%;height:calc(100% - 45px);padding:15px;border-radius:2px}html.dark   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .top-box[_ngcontent-%COMP%]{width:100%;height:150px;padding:10px 0 25px}html.dark   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .top-box[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:inline-flex;height:100%;border:dashed 1px #275184;border-radius:4px;margin-right:50px;justify-content:center;align-items:center;padding:0 40px;color:#275184}html.dark   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .top-box[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .icon-box[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;border:dashed 1px #275184;font-size:46px;display:inline-flex;align-items:center;justify-content:center;margin-right:20px}html.dark   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .top-box[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .num-box[_ngcontent-%COMP%]{text-align:center}html.dark   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .top-box[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .num-box[_ngcontent-%COMP%]   .num[_ngcontent-%COMP%]{font-size:34px}html.dark   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .top-box[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .num-box[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:16px}html.dark   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .top-box[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{margin:0 20px;border-left:solid 1px #275184;height:70px}html.dark   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .top-box[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .other-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;margin-top:8px}html.dark   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .bottom-box[_ngcontent-%COMP%]{width:100%;height:calc(100% - 150px)}html.dark   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .bottom-box[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding-top:15px;height:calc(100% - 32px)}html.dark   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .bottom-box[_ngcontent-%COMP%]     .dy-tabs{height:100%}html.dark   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .bottom-box[_ngcontent-%COMP%]     .dy-tabs-header{padding:0 0 8px;width:100%;background-color:#fbfcff;border-bottom:solid 1px #dbe9ea}html.dark   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .bottom-box[_ngcontent-%COMP%]     .dy-tabs-header-item.active{position:relative}html.dark   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .bottom-box[_ngcontent-%COMP%]     .dy-tabs-header-item.active:after{content:"";position:absolute;width:100%;height:2px;background-color:#275184;left:0;bottom:-9px}html.dark   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .bottom-box[_ngcontent-%COMP%]   .left-box[_ngcontent-%COMP%]{width:200px;height:100%}html.dark   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .bottom-box[_ngcontent-%COMP%]   .left-box[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:100%;height:23px;line-height:23px;padding-left:8px;background-color:#e6edf7;white-space:nowrap;color:#394f69}html.dark   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .bottom-box[_ngcontent-%COMP%]   .left-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:8px;width:100%;height:calc(100% - 23px);overflow:auto;background:#f4f7fc}html.dark   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .bottom-box[_ngcontent-%COMP%]   .left-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]     .dy-search{margin-bottom:5px}html.dark   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .bottom-box[_ngcontent-%COMP%]   .left-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]     .ant-tree .ant-tree-node-content-wrapper{width:100%;padding:0 5px}html.dark   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .bottom-box[_ngcontent-%COMP%]   .left-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]     .ant-tree .ant-tree-node-content-wrapper.ant-tree-node-selected{color:#275184;background-color:#e6edf7}html.dark   [_nghost-%COMP%]   .cluster-detail[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   .bottom-box[_ngcontent-%COMP%]   .right-box[_ngcontent-%COMP%]{width:calc(100% - 215px);height:100%;overflow-y:auto}']}),o})();function Y(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"i",10),t.NdJ("click",function(){return t.CHM(n),t.oxw().addHandler()}),t.ALo(1,"nzI18n"),t.qZA()}2&o&&t.Q6J("nz-tooltip",t.lcZ(1,1,"base.add"))}function V(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"i",11),t.NdJ("click",function(){return t.CHM(n),t.oxw().batchDelete()}),t.ALo(1,"nzI18n"),t.qZA()}if(2&o){t.oxw();const n=t.MAs(10);t.Q6J("nz-tooltip",t.lcZ(1,2,"BatchDelete.title"))("disabled",!n.checked&&!n.indeterminate)}}function B(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"app-cluster-detail",12),t.NdJ("close",function(){return t.CHM(n),t.oxw().selectedCluster=null}),t.qZA()}if(2&o){const n=t.oxw();t.Q6J("cluster",n.selectedCluster)}}let E=(()=>{class o{constructor(n,e,a,l){this.i18n=n,this.message=e,this.api=a,this.router=l,this.columns=[{type:"checkbox"},{type:"index"},{i18n:"base.name",field:"alias"},{i18n:"base.type",field:"clusterType"},{i18n:"base.address",field:"serviceAddress"},{i18n:"base.createdTime",field:"createdTime"},{buttons:[{icon:"eye",tip:"base.detail",click:r=>this.lookHandler(r)},{icon:"xiugai",tip:"base.edit",click:r=>this.editHandler(r)},{icon:"shanchu",tip:"base.delete",type:"delete",confirmTip:"menu.cluster",click:r=>this.deleteConfirm(r)}]}]}ngOnInit(){this.getList()}getList(n=!1){this.api.getList().subscribe(e=>{this.data=e,n&&this.message.success(`${this.i18n.translate("base.refresh")}${this.i18n.translate("base.success")}`)})}addHandler(){this.router.navigate(["environment/cluster/add"])}editHandler(n){this.router.navigate([`environment/cluster/edit/${n.id}`])}lookHandler(n){this.selectedCluster=n}batchDelete(){}deleteConfirm(n){this.api.removeCluster(n.id).subscribe(e=>{this.message.success(`${this.i18n.translate("base.delete")}${this.i18n.translate("base.success")}`),this.getList()})}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(d.wi),t.Y36(C.dD),t.Y36(h.JL),t.Y36(u.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-cluster"]],decls:12,vars:8,consts:[[1,"cluster-box","pr"],[1,"toolbar"],["dy-icon","","type","xinzeng",3,"nz-tooltip","click",4,"authx"],["dy-icon","","type","piliangshanchu",3,"nz-tooltip","disabled","click",4,"authx"],["dy-icon","","type","refresh",3,"nz-tooltip","click"],[3,"search"],[1,"table-box"],["searchField","name",3,"columns","data"],["table",""],[3,"cluster","close",4,"ngIf"],["dy-icon","","type","xinzeng",3,"nz-tooltip","click"],["dy-icon","","type","piliangshanchu",3,"nz-tooltip","disabled","click"],[3,"cluster","close"]],template:function(n,e){if(1&n){const a=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"span"),t.YNc(3,Y,2,3,"i",2),t.YNc(4,V,2,4,"i",3),t.TgZ(5,"i",4),t.NdJ("click",function(){return e.getList(!0)}),t.ALo(6,"nzI18n"),t.qZA()(),t.TgZ(7,"dy-search",5),t.NdJ("search",function(r){return t.CHM(a),t.MAs(10).searchHandler(r)}),t.qZA()(),t.TgZ(8,"div",6),t._UZ(9,"app-table",7,8),t.qZA(),t.YNc(11,B,1,1,"app-cluster-detail",9),t.qZA()}2&n&&(t.xp6(3),t.Q6J("authx","Environment.Cluster.Create"),t.xp6(1),t.Q6J("authx","Environment.Cluster.Delete"),t.xp6(1),t.Q6J("nz-tooltip",t.lcZ(6,6,"base.refresh")),t.xp6(4),t.Q6J("columns",e.columns)("data",e.data),t.xp6(2),t.Q6J("ngIf",e.selectedCluster))},directives:[c.xo,g.kE,N.SY,g.J3,M.a,_.O5,$],pipes:[d.o9],styles:[".cluster-box[_ngcontent-%COMP%]{width:100%;height:100%;padding:0 15px 15px}.cluster-box[_ngcontent-%COMP%]   .table-box[_ngcontent-%COMP%]{height:calc(100% - 45px);overflow:auto}"],data:{animation:[U.MC]}}),o})();var b=s(5535),H=s(526),x=s(3640),Z=s(1894),m=s(8054),p=s(3075);function R(o,i){if(1&o&&t._UZ(0,"nz-badge",6),2&o){const n=i.$implicit;t.Q6J("nzStatus",n.online?"processing":"error")("nzText",n.online?"\u5728\u7ebf":"\u79bb\u7ebf")}}function S(o,i){if(1&o&&t._UZ(0,"nz-option",11),2&o){const n=i.$implicit;t.Q6J("nzLabel",n.alias)("nzValue",n.alias)}}function j(o,i){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"p",7)(2,"span",8),t._uU(3,"\u8c03\u5ea6\u96c6\u7fa4\uff1a"),t.qZA(),t.TgZ(4,"nz-select",9),t.NdJ("ngModelChange",function(a){return t.CHM(n),t.oxw().selectedClusters=a}),t.YNc(5,S,1,2,"nz-option",10),t.qZA()(),t.BQk()}if(2&o){const n=t.oxw();t.xp6(2),t.Q6J("nzSpan",5),t.xp6(2),t.Q6J("nzSpan",19)("ngModel",n.selectedClusters),t.xp6(1),t.Q6J("ngForOf",n.clusterList)}}let W=(()=>{class o{constructor(n,e,a,l){this.i18n=n,this.message=e,this.api=a,this.clusterApi=l,this.columns=[{i18n:"\u8282\u70b9ID",field:"id"},{i18n:"\u8282\u70b9\u540d\u79f0",field:"name"},{i18n:"\u8282\u70b9IP",field:"ipAddress"},{i18n:"\u8282\u70b9\u7c7b\u578b",field:"nodeTypes"},{i18n:"\u8282\u70b9\u72b6\u6001",render:"statusColumn"},{i18n:"\u8c03\u5ea6\u96c6\u7fa4",field:"workClusters"},{buttons:[{icon:"shezhi",tip:"\u66f4\u65b0\u8c03\u5ea6\u96c6\u7fa4",click:r=>this.settingHandler(r)}]}],this.isVisible=!1}ngOnInit(){this.getList()}getList(){this.api.getList().subscribe(n=>{this.data=n})}settingHandler(n){this.selectedNode=n,this.selectedClusters=n.workClusters.concat([]),this.isVisible=!0,this.clusterApi.getList().subscribe(e=>{this.clusterList=e})}handleOk(){this.selectedNode.workClusters=this.selectedClusters,this.api.editWorkNode(this.selectedNode.id,this.selectedNode).subscribe(n=>{this.message.success(`${this.i18n.translate("base.update")}${this.i18n.translate("base.success")}`),this.handleCancel()})}handleCancel(){this.isVisible=!1,this.selectedNode=null}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(d.wi),t.Y36(C.dD),t.Y36(h.C8),t.Y36(h.JL))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-worknode"]],decls:6,vars:4,consts:[[1,"worknode-box"],[3,"columns","data"],["table",""],["dy-column","statusColumn"],["nzTitle","\u66f4\u65b0\u8c03\u5ea6\u96c6\u7fa4",3,"nzVisible","nzWidth","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"nzModalContent"],[3,"nzStatus","nzText"],["nz-row","",2,"padding","15px","margin-bottom","0","line-height","32px"],["nz-col","",3,"nzSpan"],["nz-col","","nzMode","multiple",3,"nzSpan","ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[3,"nzLabel","nzValue"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"app-table",1,2),t.YNc(3,R,1,2,"ng-template",3),t.qZA()(),t.TgZ(4,"nz-modal",4),t.NdJ("nzVisibleChange",function(l){return e.isVisible=l})("nzOnCancel",function(){return e.handleCancel()})("nzOnOk",function(){return e.handleOk()}),t.YNc(5,j,6,4,"ng-container",5),t.qZA()),2&n&&(t.xp6(1),t.Q6J("columns",e.columns)("data",e.data),t.xp6(3),t.Q6J("nzVisible",e.isVisible)("nzWidth",420))},directives:[M.a,b.rA,H.x7,x.du,x.Hf,Z.SK,Z.t3,m.Vq,p.JJ,p.On,_.sg,m.Ip],styles:[".worknode-box[_ngcontent-%COMP%]{height:100%;padding:15px}"]}),o})();var v=s(1047),z=s(6042),T=s(2643);const X=["table"];function K(o,i){if(1&o&&t._UZ(0,"nz-option",22),2&o){const n=i.$implicit;t.Q6J("nzLabel",n)("nzValue",n)}}function G(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"input",9),t.NdJ("ngModelChange",function(a){return t.CHM(n).$implicit.name=a}),t.qZA()}2&o&&t.Q6J("ngModel",i.$implicit.name)}function tt(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"input",9),t.NdJ("ngModelChange",function(a){return t.CHM(n).$implicit.value=a}),t.qZA()}2&o&&t.Q6J("ngModel",i.$implicit.value)}let y=(()=>{class o{constructor(n,e,a,l,r){this.i18n=n,this.message=e,this.route=a,this.router=l,this.api=r,this.formParams={},this.columns=[{type:"checkbox"},{i18n:"base.attributeName",render:"nameCol"},{i18n:"base.attributeValue",render:"valueCol"}],this.data=[]}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.title="cluster."+(this.id?"edit":"add"),this.api.getTypeList().subscribe(n=>{this.typeList=n,this.id&&this.api.getCluster(this.id).subscribe(e=>{this.formParams=e,this.data=Object.keys(e.propsMap).map(a=>({name:a,value:e.propsMap[a]}))})})}saveHandler(){if(!this.formParams.alias)return this.message.warning(`${this.i18n.translate("base.pleaseInput")}${this.i18n.translate("base.name").toLocaleLowerCase()}`),!1;if(!this.formParams.clusterType)return this.message.warning(`${this.i18n.translate("base.pleaseSelect")}${this.i18n.translate("cluster.type").toLocaleLowerCase()}`),!1;if(!this.formParams.serviceAddress)return this.message.warning(`${this.i18n.translate("base.pleaseInput")}${this.i18n.translate("cluster.serviceAddress").toLocaleLowerCase()}`),!1;let e,a,n={};for(e=0;e<this.data.length;e++){if(a=this.data[e],!a.name)return this.message.warning(`${this.i18n.translate("base.pleaseInput")}${this.i18n.translate("base.attributeName").toLocaleLowerCase()}!`),!1;if(!a.value)return this.message.warning(`${this.i18n.translate("base.pleaseInput")}${this.i18n.translate("base.attributeValue").toLocaleLowerCase()}!`),!1;n[a.name]=a.value}this.formParams.propsMap=n,this.id?this.api.editCluster(this.id,this.formParams).subscribe(l=>{this.message.success(`${this.i18n.translate("base.update")}${this.i18n.translate("base.success")}`),this.goBack(300)}):this.api.addCluster(this.formParams).subscribe(l=>{this.message.success(`${this.i18n.translate("base.add")}${this.i18n.translate("base.success")}`),this.goBack(300)})}goBack(n=0){setTimeout(()=>{this.router.navigate(["environment/cluster"])},n)}addItem(n){this.data=[...this.data,{name:"",value:""}]}removeItem(n){this.data=this.data.filter(e=>!e.selected),this.table.checked=this.table.indeterminate=!1}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(d.wi),t.Y36(C.dD),t.Y36(u.gz),t.Y36(u.F0),t.Y36(h.JL))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-cluster-form"]],viewQuery:function(n,e){if(1&n&&t.Gf(X,5),2&n){let a;t.iGM(a=t.CRH())&&(e.table=a.first)}},decls:54,vars:31,consts:[[1,"layout"],[1,"bread-crumb"],["dy-icon","","type","return",3,"click"],[1,"page-form","fauto"],[1,"form-box"],[1,"sub-title","pr"],[1,"base-params"],[1,"form-label"],[1,"form-label-required"],["nz-input","","type","text",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[1,"other-params"],[1,"btns"],[3,"click"],[3,"data","columns"],["table",""],["dy-column","nameCol"],["dy-column","valueCol"],[1,"ant-modal-footer"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"disabled","click"],[3,"nzLabel","nzValue"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span"),t._uU(3),t.ALo(4,"nzI18n"),t.qZA(),t.TgZ(5,"i",2),t.NdJ("click",function(){return e.goBack()}),t.qZA()(),t.TgZ(6,"div",3)(7,"div",4)(8,"p",5),t._uU(9),t.ALo(10,"nzI18n"),t.qZA(),t.TgZ(11,"div",6)(12,"p")(13,"span",7)(14,"span",8),t._uU(15,"* "),t.qZA(),t._uU(16),t.ALo(17,"nzI18n"),t.qZA(),t.TgZ(18,"input",9),t.NdJ("ngModelChange",function(l){return e.formParams.alias=l}),t.qZA()(),t.TgZ(19,"p")(20,"span",7)(21,"span",8),t._uU(22,"* "),t.qZA(),t._uU(23),t.ALo(24,"nzI18n"),t.qZA(),t.TgZ(25,"nz-select",10),t.NdJ("ngModelChange",function(l){return e.formParams.clusterType=l}),t.YNc(26,K,1,2,"nz-option",11),t.qZA()(),t.TgZ(27,"p")(28,"span",7)(29,"span",8),t._uU(30,"* "),t.qZA(),t._uU(31),t.ALo(32,"nzI18n"),t.qZA(),t.TgZ(33,"input",9),t.NdJ("ngModelChange",function(l){return e.formParams.serviceAddress=l}),t.qZA()()(),t.TgZ(34,"p",5),t._uU(35),t.ALo(36,"nzI18n"),t.qZA(),t.TgZ(37,"div",12)(38,"div",13)(39,"span",14),t.NdJ("click",function(l){return e.addItem(l)}),t._uU(40,"+"),t.qZA(),t.TgZ(41,"span",14),t.NdJ("click",function(l){return e.removeItem(l)}),t._uU(42,"-"),t.qZA()(),t.TgZ(43,"app-table",15,16),t.YNc(45,G,1,1,"ng-template",17),t.YNc(46,tt,1,1,"ng-template",18),t.qZA()(),t.TgZ(47,"div",19)(48,"button",20),t.NdJ("click",function(){return e.goBack()}),t._uU(49),t.ALo(50,"nzI18n"),t.qZA(),t.TgZ(51,"button",21),t.NdJ("click",function(){return e.saveHandler()}),t._uU(52),t.ALo(53,"nzI18n"),t.qZA()()()()()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,15,e.title)),t.xp6(6),t.Oqu(t.lcZ(10,17,"base.basicInfo")),t.xp6(7),t.hij("",t.lcZ(17,19,"base.name"),": \xa0 "),t.xp6(2),t.Q6J("ngModel",e.formParams.alias),t.xp6(5),t.hij("",t.lcZ(24,21,"base.type"),": \xa0 "),t.xp6(2),t.Q6J("ngModel",e.formParams.clusterType),t.xp6(1),t.Q6J("ngForOf",e.typeList),t.xp6(5),t.hij("",t.lcZ(32,23,"base.address"),": \xa0 "),t.xp6(2),t.Q6J("ngModel",e.formParams.serviceAddress),t.xp6(2),t.Oqu(t.lcZ(36,25,"base.extendedAttribute")),t.xp6(8),t.Q6J("data",e.data)("columns",e.columns),t.xp6(6),t.Oqu(t.lcZ(50,27,"base.return")),t.xp6(2),t.Q6J("disabled",e.formParams.externalId&&e.id),t.xp6(1),t.Oqu(t.lcZ(53,29,"base.submit")))},directives:[g.kE,v.Zp,p.Fj,p.JJ,p.On,m.Vq,_.sg,m.Ip,M.a,b.rA,z.ix,T.dQ,f.w],pipes:[d.o9],styles:["html.default[_ngcontent-%COMP%]   html[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   body[_ngcontent-%COMP%]{min-width:1366px}html.default[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none}html.default[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin:0}html.default[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;flex:auto;flex-direction:column}html.default[_ngcontent-%COMP%]   .fdc[_ngcontent-%COMP%]{flex-direction:column}html.default[_ngcontent-%COMP%]   .fdr[_ngcontent-%COMP%]{flex-direction:row}html.default[_ngcontent-%COMP%]   .fauto[_ngcontent-%COMP%]{flex:auto}html.default[_ngcontent-%COMP%]   .pf[_ngcontent-%COMP%]{position:fixed}html.default[_ngcontent-%COMP%]   .pr[_ngcontent-%COMP%]{position:relative}html.default[_ngcontent-%COMP%]   .pa[_ngcontent-%COMP%]{position:absolute}html.default[_ngcontent-%COMP%]   .fl[_ngcontent-%COMP%]{float:left}html.default[_ngcontent-%COMP%]   .fr[_ngcontent-%COMP%]{float:right}html.default[_ngcontent-%COMP%]   .clear-f[_ngcontent-%COMP%]{clear:both}html.default[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#396669}html.default[_ngcontent-%COMP%]   .ant-table-pagination.ant-pagination[_ngcontent-%COMP%]{margin:0}html.default[_ngcontent-%COMP%]   .ant-pagination[_ngcontent-%COMP%]{text-align:right}html.default[_ngcontent-%COMP%]   .ant-table-column-sorter[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-table-filter-trigger[_ngcontent-%COMP%]{color:#a1a1a1}html.default[_ngcontent-%COMP%]   .ant-table-filter-trigger.active[_ngcontent-%COMP%]{color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-table-thead[_ngcontent-%COMP%]   th.ant-table-column-sort[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-table-thead[_ngcontent-%COMP%]   th.ant-table-column-has-sorters[_ngcontent-%COMP%]:hover{background:#e2eeee}html.default[_ngcontent-%COMP%]   .ant-tree-switcher[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-tree-indent-unit[_ngcontent-%COMP%]{width:17px;color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-tree[_ngcontent-%COMP%]   .ant-tree-node-content-wrapper[_ngcontent-%COMP%]{padding:0}html.default[_ngcontent-%COMP%]   .ant-tree-checkbox-inner[_ngcontent-%COMP%]{display:inline-block}html.default[_ngcontent-%COMP%]   .ant-select-tree[_ngcontent-%COMP%]   .ant-select-tree-node-content-wrapper.ant-select-tree-node-selected[_ngcontent-%COMP%]:hover{background-color:#e2eeee}html.default[_ngcontent-%COMP%]   .ant-modal-title[_ngcontent-%COMP%]{color:#396669}html.default[_ngcontent-%COMP%]   .ant-dropdown-menu-item-selected[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-dropdown-menu-submenu-title-selected[_ngcontent-%COMP%]{background-color:#e2eeee}html.default[_ngcontent-%COMP%]   .ant-badge-status-processing[_ngcontent-%COMP%]{background-color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-badge-status-processing[_ngcontent-%COMP%]:after{border-color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-tooltip[_ngcontent-%COMP%]{max-width:550px;max-height:550px;overflow:hidden}html.default[_ngcontent-%COMP%]   .ant-tooltip-content[_ngcontent-%COMP%]{width:100%;height:100%;max-width:550px;max-height:542px}html.default[_ngcontent-%COMP%]   .ant-tooltip-inner[_ngcontent-%COMP%]{box-shadow:none}html.default   [_nghost-%COMP%]   .btns[_ngcontent-%COMP%]{text-align:right;margin-bottom:5px;display:flex;justify-content:flex-end}html.default   [_nghost-%COMP%]   .btns[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:15px;height:15px;color:#2a8b92;text-align:center;line-height:11px;border-radius:50%;border:solid 1px #2a8b92;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none;margin-left:5px}html.default   [_nghost-%COMP%]   .btns[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{background-color:#d9fbfd}html.default   [_nghost-%COMP%]     .page-form .form-box .other-params .ant-table-thead>tr>th{padding:5px 3px}html.default   [_nghost-%COMP%]     .page-form .form-box .other-params .ant-table-tbody tr>td{padding:1px}html.dark   [_nghost-%COMP%]   .btns[_ngcontent-%COMP%]{text-align:right;margin-bottom:5px;display:flex;justify-content:flex-end}html.dark   [_nghost-%COMP%]   .btns[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:15px;height:15px;color:#275184;text-align:center;line-height:11px;border-radius:50%;border:solid 1px #275184;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none;margin-left:5px}html.dark   [_nghost-%COMP%]   .btns[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{background-color:#d9e1fd}html.dark   [_nghost-%COMP%]     .page-form .form-box .other-params .ant-table-thead>tr>th{padding:5px 3px}html.dark   [_nghost-%COMP%]     .page-form .form-box .other-params .ant-table-tbody tr>td{padding:1px}"]}),o})();var nt=s(7781),et=s(8306),A=s(1139),ot=s(4401),at=s(3214),lt=s(685);function it(o,i){if(1&o&&t._UZ(0,"nz-option",21),2&o){const n=i.$implicit;t.Q6J("nzLabel",n.alias)("nzValue",n.id)}}function st(o,i){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"nz-select",19),t.NdJ("ngModelChange",function(a){return t.CHM(n),t.oxw().resourceDescriptorId=a})("ngModelChange",function(a){return t.CHM(n),t.oxw().toggleResDescriptor(a)}),t.YNc(2,it,1,2,"nz-option",20),t.qZA(),t.BQk()}if(2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngModel",n.resourceDescriptorId),t.xp6(1),t.Q6J("ngForOf",n.serviceTypes)}}function rt(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"input",22),t.NdJ("ngModelChange",function(a){return t.CHM(n),t.oxw().resourceDescriptorType=a}),t.qZA()}if(2&o){const n=t.oxw();t.Q6J("ngModel",n.resourceDescriptorType)("disabled",!n.formParams.externalId&&n.id)}}function ct(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"p")(1,"span",7),t._uU(2,"\u6765\u6e90\uff1a"),t.qZA(),t.TgZ(3,"input",9),t.NdJ("ngModelChange",function(a){return t.CHM(n),t.oxw().formParams.module=a}),t.qZA()()}if(2&o){const n=t.oxw();t.xp6(3),t.Q6J("ngModel",n.formParams.module)}}function dt(o,i){if(1&o&&(t.TgZ(0,"div"),t._UZ(1,"sightx-group",23),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("parameter",n.parameters)}}function ut(o,i){1&o&&t._UZ(0,"nz-empty",24),2&o&&t.Q6J("nzNotFoundContent","\u6682\u65e0\u5c5e\u6027")}let k=(()=>{class o{constructor(n,e,a,l,r,F,ht){this.i18n=n,this.message=e,this.route=a,this.router=l,this.resApi=r,this.settingApi=F,this.compoxService=ht,this.formParams={alias:"",settingXml:"",externalId:!1,module:""},this.mappingKResIdVParametergroups={}}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.title="setting."+(this.id?"edit":"add"),this.groupId=this.route.snapshot.queryParamMap.get("groupId"),this.resApi.getResDescriptorList().subscribe(n=>{n&&n.length&&(this.serviceTypes=n,this.id?this.settingApi.getSetting(this.id).subscribe(e=>{this.formParams.alias=e.alias,this.formParams.externalId=e.externalId,this.formParams.module=e.module,this.resourceDescriptorType=e.resourceDescriptorType,this.getCompox(e.resourceDescriptorId).subscribe(()=>{e.settingXml&&(this.parameters=A.n.parseParameters(e.settingXml))})}):(this.resourceDescriptorId=this.serviceTypes[0].id,this.toggleResDescriptor(this.resourceDescriptorId)))})}getCompox(n){return new et.y(e=>{this.resApi.getResDescriptorCompox(n).subscribe(a=>{if(a){let l=(0,nt.tq)(a).compoxes;l&&this.compoxService.addCompoxes(l.compox)}e.next()})})}toggleResDescriptor(n){let e=this.mappingKResIdVParametergroups[n];e?this.parameters=e:this.getCompox(n).subscribe(()=>{e=A.n.parseParameters(this.serviceTypes.find(a=>a.id===n).descriptorXml),this.parameters=e,this.mappingKResIdVParametergroups[n]=e})}saveHandler(){!this.getApiParams()||(this.id?this.settingApi.editSetting(this.id,this.formParams).subscribe(n=>{this.message.success(`${this.i18n.translate("base.update")}${this.i18n.translate("base.success")}`),this.goBack(300)}):this.settingApi.addSetting(this.groupId,this.resourceDescriptorId,this.formParams).subscribe(n=>{this.message.success(`${this.i18n.translate("base.add")}${this.i18n.translate("base.success")}`),this.goBack(300)}))}getApiParams(){return this.formParams.alias?(this.formParams.settingXml=this.parameters?this.parameters.getXml(!1):"",!0):(this.message.warning(`${this.i18n.translate("base.pleaseInput")}${this.i18n.translate("base.name").toLocaleLowerCase()}`),!1)}goBack(n=0){setTimeout(()=>{this.router.navigate(["environment/service"])},n)}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(d.wi),t.Y36(C.dD),t.Y36(u.gz),t.Y36(u.F0),t.Y36(h.MI),t.Y36(h.df),t.Y36(ot.k))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-form"]],decls:43,vars:16,consts:[[1,"layout"],[1,"bread-crumb"],["dy-icon","","type","return",3,"click"],[1,"page-form","fauto"],[1,"form-box"],[1,"sub-title","pr"],[1,"base-params"],[1,"form-label"],[1,"form-label-required"],["nz-input","","type","text",3,"ngModel","ngModelChange"],[4,"ngIf","ngIfElse"],["selectTemplate",""],[4,"ngIf"],["nz-input",""],[1,"other-params"],["noParametersTemplate",""],[1,"ant-modal-footer"],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","primary",3,"disabled","click"],[3,"ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[3,"nzLabel","nzValue"],["nz-input","","type","text",3,"ngModel","disabled","ngModelChange"],[3,"parameter"],["nzNotFoundImage","simple",3,"nzNotFoundContent"]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span"),t._uU(3),t.ALo(4,"nzI18n"),t.qZA(),t.TgZ(5,"i",2),t.NdJ("click",function(){return e.goBack()}),t.qZA()(),t.TgZ(6,"div",3)(7,"div",4)(8,"p",5),t._uU(9,"\u57fa\u672c\u4fe1\u606f"),t.qZA(),t.TgZ(10,"div",6)(11,"p")(12,"span",7)(13,"span",8),t._uU(14,"* "),t.qZA(),t._uU(15,"\u540d\u79f0\uff1a "),t.qZA(),t.TgZ(16,"input",9),t.NdJ("ngModelChange",function(l){return e.formParams.alias=l}),t.qZA()(),t.TgZ(17,"p")(18,"span",7)(19,"span",8),t._uU(20,"* "),t.qZA(),t._uU(21,"\u7c7b\u578b\uff1a "),t.qZA(),t.YNc(22,st,3,2,"ng-container",10),t.YNc(23,rt,1,2,"ng-template",null,11,t.W1O),t.qZA(),t.YNc(25,ct,4,1,"p",12),t.TgZ(26,"p")(27,"span",7),t._uU(28,"\u63cf\u8ff0\uff1a"),t.qZA(),t._UZ(29,"textarea",13),t.qZA()(),t.TgZ(30,"p",5),t._uU(31,"\u670d\u52a1\u914d\u7f6e\u4fe1\u606f"),t.qZA(),t.TgZ(32,"div",14),t.YNc(33,dt,2,1,"div",10),t.YNc(34,ut,1,1,"ng-template",null,15,t.W1O),t.qZA(),t.TgZ(36,"div",16)(37,"button",17),t.NdJ("click",function(){return e.goBack()}),t._uU(38),t.ALo(39,"nzI18n"),t.qZA(),t.TgZ(40,"button",18),t.NdJ("click",function(){return e.saveHandler()}),t._uU(41),t.ALo(42,"nzI18n"),t.qZA()()()()()),2&n){const a=t.MAs(24),l=t.MAs(35);t.xp6(3),t.Oqu(t.lcZ(4,10,e.title)),t.xp6(13),t.Q6J("ngModel",e.formParams.alias),t.xp6(6),t.Q6J("ngIf",!e.id)("ngIfElse",a),t.xp6(3),t.Q6J("ngIf",e.formParams.externalId),t.xp6(8),t.Q6J("ngIf",e.parameters)("ngIfElse",l),t.xp6(5),t.Oqu(t.lcZ(39,12,"base.return")),t.xp6(2),t.Q6J("disabled",e.formParams.externalId&&e.id),t.xp6(1),t.Oqu(t.lcZ(42,14,"base.submit"))}},directives:[g.kE,v.Zp,p.Fj,p.JJ,p.On,_.O5,m.Vq,_.sg,m.Ip,at.S,lt.p9,z.ix,T.dQ,f.w],pipes:[d.o9],encapsulation:2}),o})();const gt=[{path:"",component:Q,children:[{path:"cluster",component:E,data:{authPathMatch:"full"},canActivate:[c.$P],canActivateChild:[c.$P]},{path:"worknode",component:W,data:{authPathMatch:"full"},canActivate:[c.$P],canActivateChild:[c.$P]},{path:"service",loadChildren:()=>s.e(534).then(s.bind(s,8534)).then(o=>o.ServiceHelperModule),data:{authPathMatch:"full"},canActivate:[c.$P],canActivateChild:[c.$P]}]},{path:"service/add",component:k},{path:"service/edit/:id",component:k},{path:"cluster/add",component:y},{path:"cluster/edit/:id",component:y}];let pt=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[w.L,c.OX,I.m,u.Bz.forChild(gt)]]}),o})()}}]);