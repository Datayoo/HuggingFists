"use strict";(self.webpackChunksengee_ui=self.webpackChunksengee_ui||[]).push([[1922],{71922:(S,u,a)=>{a.r(u),a.d(u,{PromptModule:()=>L});var f=a(69808),s=a(77152),c=a(62545),g=a(64219),O=a(82886),P=a(15701),t=a(5e3),_=a(49727),m=a(89445),x=a(90056),C=a(91156),M=a(82683),h=a(11047),d=a(93075),b=a(72394),v=a(55535),y=a(404);function z(o,p){if(1&o){const n=t.EpF();t.TgZ(0,"span",15),t.NdJ("click",function(){return t.CHM(n),t.oxw().searchHandler()}),t.qZA()}}function T(o,p){if(1&o&&(t.TgZ(0,"div",16),t._uU(1),t.qZA()),2&o){const n=p.$implicit,e=t.oxw();t.Q6J("nz-tooltip",e.toPromptTip(n.promptTemplate)),t.xp6(1),t.Oqu(e.toPromptTip(n.promptTemplate))}}const w=function(o){return{height:o}};let k=(()=>{class o{constructor(n,e,l,r){this.message=n,this.i18n=e,this.router=l,this.api=r,this.typeList=[{name:"\u8bed\u8a00",children:P.s.map(i=>({alias:this.i18n.translate(i.i18n),value:i.value,selected:!0}))},{name:"\u7c7b\u578b",children:P.y.map(i=>({alias:this.i18n.translate(i.i18n),value:i.value.toLocaleUpperCase(),selected:!0}))}],this.listOfData=[],this.pageInfo={pageIndex:1,pageSize:10,total:0},this.searchValue="",this.languages=this.typeList[0].children.map(i=>i.value).join(","),this.types=this.typeList[1].children.map(i=>i.value).join(","),this.columns=[{type:"index"},{i18n:"base.name",field:"name"},{i18n:"base.language",field:"lang",dataI18n:!0},{i18n:"base.model",field:"model"},{i18n:"prompt.modelFamily",field:"modelFamily"},{i18n:"base.type",field:"promptTemplateTypeI18n",dataI18n:!0},{i18n:"prompt.template",field:"promptTemplate",render:"templateColumn"},{buttons:[{icon:"xiugai",tip:"base.edit",click:i=>this.onEdit(i)},{icon:"shanchu",tip:"base.delete",type:"delete",confirmTip:"Prompt",click:i=>this.deleteConfirm(i)}]}]}ngOnInit(){this.searchHandler()}onReturn(){this.router.navigate(["resource"])}searchHandler(){this.api.searchPrompt("",this.searchValue,this.languages,this.types,this.pageInfo.pageIndex,this.pageInfo.pageSize).subscribe(n=>{this.listOfData=n.content.map(e=>(e.promptTemplateTypeI18n=e.promptTemplateType?`prompt.${e.promptTemplateType.toLocaleLowerCase()}`:"",e.promptTemplate=this.parsePrompt(e.promptTemplate),e)),this.pageInfo.total=n.totalElements})}parsePrompt(n){let e={prefix:"",prompt:"",suffix:""};try{e=JSON.parse(n)}catch(l){}return[{i18n:"prompt.prefix",value:null==e?void 0:e.prefix},{i18n:"prompt.prompt",value:(null==e?void 0:e.prompt)||n},{i18n:"prompt.suffix",value:null==e?void 0:e.suffix}]}pageChangeHandler(n){this.pageInfo.pageIndex=n.pageIndex,this.pageInfo.pageSize=n.pageSize,this.searchHandler()}onSelectLanguage(n){this.languages=n,this.pageInfo.pageIndex=1,this.searchHandler()}onSelectType(n){this.types=n,this.pageInfo.pageIndex=1,this.searchHandler()}deleteConfirm(n){this.api.deleteBatchPrompt([n.id]).subscribe(e=>{this.message.success(`${this.i18n.translate("base.delete")}${this.i18n.translate("base.success")}`),this.searchHandler()})}toPromptTip(n){let e="";return n.forEach(l=>{l.value&&(e+=this.i18n.translate(l.i18n),e+=":\n",e+=l.value,e+="\n")}),e}onEdit(n){sessionStorage.setItem("prompt-edit",JSON.stringify(n)),this.router.navigate([`resource/prompt/edit/${n.id}`])}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(_.dD),t.Y36(m.wi),t.Y36(s.F0),t.Y36(x.Xp))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-prompt-retrieval"]],decls:26,vars:23,consts:[[1,"page-retrieval","pr"],["dy-icon","","type","return",3,"click"],["nzSearch","","nzSize","large",3,"nzSuffix"],["type","text","nz-input","",3,"ngModel","placeholder","ngModelChange","keyup.enter"],["suffixIconSearch",""],[1,"types-box"],["typesBox",""],[1,"type-box"],[1,"type-label"],[1,"type-item-box"],[3,"data","selected"],[1,"table-box",3,"ngStyle"],[3,"columns","data","total","pageIndex","pageSize","pageChange"],["table",""],["dy-column","templateColumn"],["dy-icon","","type","sousuo",3,"click"],[1,"template-column",3,"nz-tooltip"]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0)(1,"i",1),t.NdJ("click",function(){return e.onReturn()}),t.qZA(),t.TgZ(2,"nz-input-group",2)(3,"input",3),t.NdJ("ngModelChange",function(r){return e.searchValue=r})("keyup.enter",function(){return e.searchHandler()}),t.ALo(4,"nzI18n"),t.ALo(5,"nzI18n"),t.qZA()(),t.YNc(6,z,1,0,"ng-template",null,4,t.W1O),t.TgZ(8,"div",5,6)(10,"div",7)(11,"span",8),t._uU(12),t.ALo(13,"nzI18n"),t.qZA(),t.TgZ(14,"span",9)(15,"dy-checkbox-btn",10),t.NdJ("selected",function(r){return e.onSelectLanguage(r)}),t.qZA()()(),t.TgZ(16,"div",7)(17,"span",8),t._uU(18),t.ALo(19,"nzI18n"),t.qZA(),t.TgZ(20,"span",9)(21,"dy-checkbox-btn",10),t.NdJ("selected",function(r){return e.onSelectType(r)}),t.qZA()()()(),t.TgZ(22,"div",11)(23,"app-table",12,13),t.NdJ("pageChange",function(r){return e.pageChangeHandler(r)}),t.YNc(25,T,2,2,"ng-template",14),t.qZA()()()),2&n){const l=t.MAs(7),r=t.MAs(9);t.xp6(2),t.Q6J("nzSuffix",l),t.xp6(1),t.Q6J("ngModel",e.searchValue)("placeholder",t.lcZ(4,13,"base.pleaseInput")+t.lcZ(5,15,"base.name")),t.xp6(9),t.hij("",t.lcZ(13,17,e.typeList[0].name),": "),t.xp6(3),t.Q6J("data",e.typeList[0].children),t.xp6(3),t.hij("",t.lcZ(19,19,e.typeList[1].name),": "),t.xp6(3),t.Q6J("data",e.typeList[1].children),t.xp6(1),t.Q6J("ngStyle",t.VKq(21,w,"calc(100% - 111px - "+r.offsetHeight+"px)")),t.xp6(1),t.Q6J("columns",e.columns)("data",e.listOfData)("total",e.pageInfo.total)("pageIndex",e.pageInfo.pageIndex)("pageSize",e.pageInfo.pageSize)}},directives:[C.kE,M.w,h.gB,h.ke,h.Zp,d.Fj,d.JJ,d.On,C.Ov,f.PC,b.a,v.rA,y.SY],pipes:[m.o9],styles:["html.default[_ngcontent-%COMP%]   html[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   body[_ngcontent-%COMP%]{min-width:1366px}html.default[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none}html.default[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin:0}html.default[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;flex:auto;flex-direction:column}html.default[_ngcontent-%COMP%]   .fdc[_ngcontent-%COMP%]{flex-direction:column}html.default[_ngcontent-%COMP%]   .fdr[_ngcontent-%COMP%]{flex-direction:row}html.default[_ngcontent-%COMP%]   .fauto[_ngcontent-%COMP%]{flex:auto}html.default[_ngcontent-%COMP%]   .pf[_ngcontent-%COMP%]{position:fixed}html.default[_ngcontent-%COMP%]   .pr[_ngcontent-%COMP%]{position:relative}html.default[_ngcontent-%COMP%]   .pa[_ngcontent-%COMP%]{position:absolute}html.default[_ngcontent-%COMP%]   .fl[_ngcontent-%COMP%]{float:left}html.default[_ngcontent-%COMP%]   .fr[_ngcontent-%COMP%]{float:right}html.default[_ngcontent-%COMP%]   .clear-f[_ngcontent-%COMP%]{clear:both}html.default[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#396669}html.default[_ngcontent-%COMP%]   .ant-table-pagination.ant-pagination[_ngcontent-%COMP%]{margin:0}html.default[_ngcontent-%COMP%]   .ant-pagination[_ngcontent-%COMP%]{text-align:right}html.default[_ngcontent-%COMP%]   .ant-table-column-sorter[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-table-filter-trigger[_ngcontent-%COMP%]{color:#a1a1a1}html.default[_ngcontent-%COMP%]   .ant-table-filter-trigger.active[_ngcontent-%COMP%]{color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-table-thead[_ngcontent-%COMP%]   th.ant-table-column-sort[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-table-thead[_ngcontent-%COMP%]   th.ant-table-column-has-sorters[_ngcontent-%COMP%]:hover{background:#e2eeee}html.default[_ngcontent-%COMP%]   .ant-tree-switcher[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-tree-indent-unit[_ngcontent-%COMP%]{width:17px;color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-tree[_ngcontent-%COMP%]   .ant-tree-node-content-wrapper[_ngcontent-%COMP%]{padding:0}html.default[_ngcontent-%COMP%]   .ant-tree-checkbox-inner[_ngcontent-%COMP%]{display:inline-block}html.default[_ngcontent-%COMP%]   .ant-select-tree[_ngcontent-%COMP%]   .ant-select-tree-node-content-wrapper.ant-select-tree-node-selected[_ngcontent-%COMP%]:hover{background-color:#e2eeee}html.default[_ngcontent-%COMP%]   .ant-modal-title[_ngcontent-%COMP%]{color:#396669}html.default[_ngcontent-%COMP%]   .ant-dropdown-menu-item-selected[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-dropdown-menu-submenu-title-selected[_ngcontent-%COMP%]{background-color:#e2eeee}html.default[_ngcontent-%COMP%]   .ant-badge-status-processing[_ngcontent-%COMP%]{background-color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-badge-status-processing[_ngcontent-%COMP%]:after{border-color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-tooltip[_ngcontent-%COMP%]{max-width:550px;max-height:550px;overflow:hidden}html.default[_ngcontent-%COMP%]   .ant-tooltip-content[_ngcontent-%COMP%]{width:100%;height:100%;max-width:550px;max-height:542px}html.default[_ngcontent-%COMP%]   .ant-tooltip-inner[_ngcontent-%COMP%]{box-shadow:none}html.default[_ngcontent-%COMP%]   .ant-tooltip.replicable[_ngcontent-%COMP%]   .ant-tooltip-inner[_ngcontent-%COMP%]{display:flex;overflow:hidden;padding-right:3px}html.default[_ngcontent-%COMP%]   .ant-tooltip.replicable[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{overflow:auto}html.default[_ngcontent-%COMP%]   .ant-tooltip.replicable[_ngcontent-%COMP%]   .copy-box[_ngcontent-%COMP%]{height:20px;position:relative;top:-7px}html.default[_ngcontent-%COMP%]   .ant-tooltip.replicable[_ngcontent-%COMP%]   .copy-box[_ngcontent-%COMP%]   .ic-fuzhi[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-tooltip.replicable[_ngcontent-%COMP%]   .copy-box[_ngcontent-%COMP%]   .ic-check[_ngcontent-%COMP%]{font-size:20px}html.default[_ngcontent-%COMP%]   .ant-tooltip.replicable[_ngcontent-%COMP%]   .copy-box[_ngcontent-%COMP%]   .ic-fuzhi[_ngcontent-%COMP%]:hover, html.default[_ngcontent-%COMP%]   .ant-tooltip.replicable[_ngcontent-%COMP%]   .copy-box[_ngcontent-%COMP%]   .ic-check[_ngcontent-%COMP%]:hover{color:#c4c4c4}html.default   [_nghost-%COMP%]   .type-box[_ngcontent-%COMP%]{font-size:13px}html.default   [_nghost-%COMP%]     .app-table .template-column{width:300px;overflow:hidden;white-space:break-spaces;text-overflow:ellipsis;-webkit-line-clamp:3;display:-webkit-box;-webkit-box-orient:vertical}html.default   [_nghost-%COMP%]   .ant-pagination[_ngcontent-%COMP%]{text-align:left;margin-left:15px}html.dark   [_nghost-%COMP%]   .type-box[_ngcontent-%COMP%]{font-size:13px}html.dark   [_nghost-%COMP%]     .app-table .template-column{width:300px;overflow:hidden;white-space:break-spaces;text-overflow:ellipsis;-webkit-line-clamp:3;display:-webkit-box;-webkit-box-orient:vertical}html.dark   [_nghost-%COMP%]   .ant-pagination[_ngcontent-%COMP%]{text-align:left;margin-left:15px}html.light-blue   [_nghost-%COMP%]   .type-box[_ngcontent-%COMP%]{font-size:13px}html.light-blue   [_nghost-%COMP%]     .app-table .template-column{width:300px;overflow:hidden;white-space:break-spaces;text-overflow:ellipsis;-webkit-line-clamp:3;display:-webkit-box;-webkit-box-orient:vertical}html.light-blue   [_nghost-%COMP%]   .ant-pagination[_ngcontent-%COMP%]{text-align:left;margin-left:15px}html.dark-blue   [_nghost-%COMP%]   .type-box[_ngcontent-%COMP%]{font-size:13px}html.dark-blue   [_nghost-%COMP%]     .app-table .template-column{width:300px;overflow:hidden;white-space:break-spaces;text-overflow:ellipsis;-webkit-line-clamp:3;display:-webkit-box;-webkit-box-orient:vertical}html.dark-blue   [_nghost-%COMP%]   .ant-pagination[_ngcontent-%COMP%]{text-align:left;margin-left:15px}html.blue1   [_nghost-%COMP%]   .type-box[_ngcontent-%COMP%]{font-size:13px}html.blue1   [_nghost-%COMP%]     .app-table .template-column{width:300px;overflow:hidden;white-space:break-spaces;text-overflow:ellipsis;-webkit-line-clamp:3;display:-webkit-box;-webkit-box-orient:vertical}html.blue1   [_nghost-%COMP%]   .ant-pagination[_ngcontent-%COMP%]{text-align:left;margin-left:15px}"]}),o})();function I(o,p){1&o&&(t.TgZ(0,"li",6),t._uU(1),t.ALo(2,"nzI18n"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"prompt.template")," "))}function Z(o,p){1&o&&(t.TgZ(0,"li",7),t._uU(1),t.ALo(2,"nzI18n"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"base.retrieval")," "))}const A=[{path:"",component:(()=>{class o{constructor(n,e){this.route=n,this.helper=e}ngOnInit(){this.helper.defaultEnter(this.route)}ngOnDestroy(){}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(s.gz),t.Y36(c.$J))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-prompt-main"]],decls:7,vars:2,consts:[[1,"tab-menu-box"],[1,"menu"],["nz-menu",""],["nz-menu-item","","nzMatchRouter","","routerLink","./list",4,"authx"],["nz-menu-item","","nzMatchRouter","","routerLink","./retrieval",4,"authx"],[1,"content",2,"padding","15px"],["nz-menu-item","","nzMatchRouter","","routerLink","./list"],["nz-menu-item","","nzMatchRouter","","routerLink","./retrieval"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"ul",2),t.YNc(3,I,3,3,"li",3),t.YNc(4,Z,3,3,"li",4),t.qZA()(),t.TgZ(5,"div",5),t._UZ(6,"dy-router-outlet"),t.qZA()()),2&n&&(t.xp6(3),t.Q6J("authx","Resource.Prompt.Group"),t.xp6(1),t.Q6J("authx","Resource.Prompt.Retrieval"))},directives:[g.wO,c.xo,g.r9,M.w,s.rH,c.Fr],pipes:[m.o9],encapsulation:2}),o})(),children:[{path:"list",loadChildren:()=>a.e(5515).then(a.bind(a,95515)).then(o=>o.PromptListModule),data:{authPathMatch:"full"},canActivate:[c.$P],canActivateChild:[c.$P]},{path:"retrieval",component:k,data:{authPathMatch:"full"},canActivate:[c.$P],canActivateChild:[c.$P]}]}];let L=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[f.ez,c.OX,g.ip,O.m,s.Bz.forChild(A)]]}),o})()}}]);