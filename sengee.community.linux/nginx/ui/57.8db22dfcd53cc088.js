"use strict";(self.webpackChunksengee_ui=self.webpackChunksengee_ui||[]).push([[57],{74736:(q,A,d)=>{d.d(A,{N:()=>ot});var o=d(57781),t=d(28076),y=d(46055),n=d(5e3),O=d(14581),C=d(89445),v=d(69808),z=d(49727),I=d(86045),R=d(31453);const x=["blank"],D=["portDataBox"],_=["dataVis"],P=["codemirror"],F=["releasedModelTemp"],E=["modelGroup"],J=["groupTree"];function V(g,M){if(1&g&&(n.TgZ(0,"a",48),n._uU(1),n._UZ(2,"span",49),n.qZA()),2&g){const a=n.oxw(),l=n.MAs(5);n.Q6J("nzDropdownMenu",l),n.xp6(1),n.hij(" ",(null==a.selectedTask?null:a.selectedTask.jobName)||"\u8bf7\u9009\u62e9\u5b50\u4efb\u52a1"," ")}}function Q(g,M){if(1&g){const a=n.EpF();n.TgZ(0,"li",50),n.NdJ("click",function(){const m=n.CHM(a).$implicit;return n.oxw().toggleTask(m)}),n._uU(1),n.qZA()}if(2&g){const a=M.$implicit;n.xp6(1),n.Oqu(a.jobName)}}function T(g,M){if(1&g){const a=n.EpF();n.TgZ(0,"li",51),n.NdJ("click",function(){const m=n.CHM(a).$implicit;return n.oxw().selectNode(m)}),n._UZ(1,"i",52),n._uU(2),n.qZA()}if(2&g){const a=M.$implicit,l=n.oxw();n.ekj("selected",a===l.currentNode),n.xp6(2),n.hij(" ",a.title," ")}}function G(g,M){if(1&g&&(n.TgZ(0,"div",53),n._uU(1),n.qZA()),2&g){const a=n.oxw();n.xp6(1),n.hij(" \u603b\u8bb0\u5f55\u6570\uff1a",a.total," ")}}function B(g,M){if(1&g&&(n.TgZ(0,"th",54),n._uU(1),n.qZA()),2&g){const a=M.$implicit;n.Q6J("nzSortFn",a.sortFn),n.xp6(1),n.Oqu(a.columnName)}}const Y=function(g){return{$implicit:g}};function j(g,M){if(1&g&&(n.TgZ(0,"td",56)(1,"div",57)(2,"pre"),n._uU(3),n.ALo(4,"cellData"),n.qZA()()()),2&g){const a=M.$implicit,l=n.oxw().$implicit;n.oxw();const s=n.MAs(33);n.Q6J("nzTooltipTitle",s)("nzTooltipTitleContext",n.VKq(5,Y,l[a.columnName])),n.xp6(3),n.Oqu(n.lcZ(4,3,l[a.columnName]))}}function L(g,M){if(1&g&&(n.TgZ(0,"tr"),n.YNc(1,j,5,7,"td",55),n.qZA()),2&g){const a=n.oxw();n.xp6(1),n.Q6J("ngForOf",a.portDataColumns)}}function H(g,M){if(1&g&&(n.TgZ(0,"div")(1,"pre"),n._uU(2),n.ALo(3,"cellData"),n.qZA()()),2&g){const a=M.$implicit;n.xp6(2),n.Oqu(n.lcZ(3,1,a))}}function S(g,M){if(1&g){const a=n.EpF();n.TgZ(0,"i",61),n.NdJ("click",function(){n.CHM(a);const s=n.oxw().$implicit;return n.oxw().lookData(!1,s)}),n.qZA()}2&g&&n.Q6J("nz-tooltip","\u539f\u59cb\u6570\u636e")}function W(g,M){if(1&g){const a=n.EpF();n.TgZ(0,"i",62),n.NdJ("click",function(){n.CHM(a);const s=n.oxw().$implicit;return n.oxw().lookData(!0,s)}),n.qZA()}2&g&&n.Q6J("nz-tooltip","\u683c\u5f0f\u5316\u6570\u636e")}function $(g,M){if(1&g&&(n.TgZ(0,"tr")(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n._uU(10),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.ALo(13,"minus"),n.qZA(),n.TgZ(14,"td"),n._uU(15),n.qZA(),n.TgZ(16,"td",58),n.YNc(17,S,1,1,"i",59),n.YNc(18,W,1,1,"i",60),n.qZA()()),2&g){const a=M.$implicit;n.xp6(2),n.Oqu(a.ioType),n.xp6(2),n.Oqu(a.mediaType),n.xp6(2),n.Oqu(a.entityType),n.xp6(2),n.Oqu(a.location),n.xp6(2),n.Oqu(a.operatorId),n.xp6(2),n.Oqu(n.lcZ(13,9,a.rowCount)),n.xp6(3),n.Oqu(a.size),n.xp6(2),n.Q6J("ngIf","TABLE"!==a.mediaType),n.xp6(1),n.Q6J("ngIf",!("FILE"===a.mediaType&&a.rowCount<0))}}function K(g,M){if(1&g){const a=n.EpF();n.TgZ(0,"div",63)(1,"app-io-data",64),n.NdJ("close",function(){return n.CHM(a),n.oxw().ioAction=null}),n.qZA()()}if(2&g){const a=n.oxw();n.Q6J("@fadeMotion",void 0),n.xp6(1),n.Q6J("ioAction",a.ioAction)("formatable",a.formatable)}}function X(g,M){if(1&g&&(n.TgZ(0,"div",65),n._uU(1),n.qZA(),n.TgZ(2,"div"),n._uU(3),n.qZA()),2&g){const a=n.oxw();n.xp6(1),n.hij("\u6a21\u578b\u540d\u79f0\uff1a",null==a.releasedModel?null:a.releasedModel.name,""),n.xp6(2),n.hij("\u53d1\u5e03\u65f6\u95f4\uff1a",null==a.releasedModel?null:a.releasedModel.createdTime,"")}}function tt(g,M){if(1&g){const a=n.EpF();n.TgZ(0,"app-group-tree",66,67),n.NdJ("selectedGroup",function(s){return n.CHM(a),n.oxw().selectedGroupHandler(s)}),n.ALo(2,"nzI18n"),n.qZA()}if(2&g){const a=n.oxw();n.Q6J("name",n.lcZ(2,4,"ModelGrp"))("groupType",a.groupType)("readonly",!0)("searchEnabled",!1)}}function nt(g,M){if(1&g&&(n.ynx(0),n._UZ(1,"app-dir-data",68),n.BQk()),2&g){const a=n.oxw();n.xp6(1),n.Q6J("ioAction",a.dirIoAction)}}const et=function(){return{mode:"application/json",readOnly:!0}};let ot=(()=>{class g{constructor(a,l,s,m,b,k,Z){this.api=a,this.i18n=l,this.modelApi=s,this.location=m,this.message=b,this.nzImageService=k,this.ser=Z,this.selectedIndex=0,this.formatable=!1,this.dataSize=100,this.pageNumber=1,this.pageSize=100,this.total=0,this.loading=!0,this.columnNumTypes=["byte","short","int","long","float","double"],this.pageInfo={pageIndex:1,pageSize:10,pageTotal:0},this.modalVisible=!1,this.groupType=y.b0.ModelGrp,this.columns=[{type:"index"},{i18n:"\u6a21\u578b\u540d\u79f0",field:"modelName"},{i18n:"\u6a21\u578b\u5206\u7c7b",field:"modelCategory"},{i18n:"\u6a21\u578b\u7c7b\u578b",field:"modelType"},{i18n:"\u7b97\u6cd5",field:"algor"},{i18n:"\u751f\u6210\u7b97\u5b50",field:"operatorId"},{i18n:"\u65f6\u95f4",field:"createdTime"},{buttons:[{icon:"eye",tip:"\u67e5\u770b\u8be6\u60c5",click:N=>this.lookDetail(N)},{icon:"fabu",tip:"base.release",click:N=>this.releaseHandler(N)}]}]}ngOnInit(){}ngAfterViewInit(){new IntersectionObserver(l=>{if(l[0].isIntersecting){if(this.loading)return;this.pageNumber++,this.getResPortData()}}).observe(this.blank.nativeElement)}ngOnChanges(a){var l;a.taskId&&a.taskId.currentValue&&(this.selectedTask=this.selectedTask||(null===(l=this.taskList)||void 0===l?void 0:l[0]),this.getResPortList(),this.getIoActionList(),this.getResModelList())}goBack(){this.location.back()}selectedIndexChange(a){2===a&&this.dataVis.resize()}toggleTask(a){this.selectedTask=a,this.portData&&(this.portData.length=0),this.pageNumber=1,this.portDataBox.nativeElement.scrollTop=0,this.getResPortList(),this.getIoActionList(),this.getResModelList()}searchHandler(a){}openFolder(a){}tabSelectChange(a){2===a&&setTimeout(()=>{this.codemirror.codeMirror.refresh()})}getResPortList(){var a;this.api.getResPortList((null===(a=this.selectedTask)||void 0===a?void 0:a.id)||this.taskId).subscribe(l=>{this.treeData=l.map(s=>({title:s,key:s,isLeaf:!0})),this.treeData&&this.treeData.length&&(this.currentNode=this.treeData[0])&&this.getResPortData()})}getResPortData(){var a;!this.currentNode||(this.loading=!0,this.api.getResPortData((null===(a=this.selectedTask)||void 0===a?void 0:a.id)||this.taskId,this.currentNode.title,this.pageNumber,this.pageSize).subscribe(l=>{this.loading=!1;let s=l;this.total=s.total,"json"===s.dataType&&(s=JSON.parse(s.result)),this.portDataColumns=s.columnSetMetadata.columns,this.portDataColumns.map(b=>{b.sortFn=this.columnNumTypes.indexOf(b.columnType.toLocaleLowerCase())>-1?(k,Z)=>k[b.columnName]-Z[b.columnName]:(k,Z)=>k[b.columnName].localeCompare(Z[b.columnName])});const m=s.data.filter(b=>b.toString()).map(b=>{const k={};return this.portDataColumns.map((Z,N)=>{k[Z.columnName]=b[N]}),k});this.portData=this.portData?this.portData.concat(m):m}))}selectNode(a){this.currentNode=a,this.portData&&(this.portData.length=0),this.pageNumber=1,this.portDataBox.nativeElement.scrollTop=0,this.getResPortData()}getIoActionList(){var a;this.api.getIoActionList((null===(a=this.selectedTask)||void 0===a?void 0:a.id)||this.taskId).subscribe(l=>{this.ioActionList=l})}pageChangeHandler(){}lookData(a,l){o.vu.test(l.location)?this.api.getIoActionData(l.id,l.size,!0).subscribe(s=>{this.nzImageService.preview([{src:(0,o.vK)(s.result)}])}):a||"FILE"!==l.mediaType?(this.formatable=a,this.ioAction=l):this.api.ioActionDataIsDirectory(l.id).subscribe(s=>{s?(this.dirIoAction=l,this.modalVisible=!0):(this.formatable=a,this.ioAction=l)})}handleCancel(){this.modalVisible=!1}getResModelList(){var a;this.api.getResModelList((null===(a=this.selectedTask)||void 0===a?void 0:a.id)||this.taskId).subscribe(l=>{this.listOfData=l,this.listOfData&&this.listOfData.length&&this.lookDetail(this.listOfData[0])})}lookDetail(a){this.selectedRowData=a,this.modelApi.getUnverifiedMode(a.id).subscribe(l=>{this.jsonData=JSON.stringify(l,null,"\t")})}releaseHandler(a){this.modelApi.getModelTracker(a.jobId,a.operatorId).subscribe(l=>{this.releasedModel=l,this.releasedModel?this.release2ReleasedModel(a):this.release2NewGroupOrModel(a)})}release2ReleasedModel(a){this.ser.show({title:"\u53d1\u5e03\u5230\u5df2\u6709\u6a21\u578b\uff1f",content:this.releasedModelTemp,backdropClass:"opacity-mask",top:69,right:225,height:"auto",confirmText:"\u662f",cancelText:"\u5426",confirm:()=>new Promise((l,s)=>{this.modelApi.publishToModel(a.id,this.releasedModel.id).subscribe(m=>{this.message.success("\u53d1\u5e03\u6210\u529f!"),l(!0)},m=>{s(!1)})}),cancel:()=>{setTimeout(()=>{this.release2NewGroupOrModel(a)},300)}})}release2NewGroupOrModel(a){this.ser.show({title:"\u9009\u62e9\u5206\u7ec4\u6216\u6a21\u578b",content:this.modelGroup,backdropClass:"opacity-mask",top:69,right:225,confirm:()=>new Promise((l,s)=>{var m,b,k;(null===(m=this.selectedGrp)||void 0===m?void 0:m.resourceType)===this.groupType?this.modelApi.publishToGroup(a.id,null===(b=this.selectedGrp)||void 0===b?void 0:b.id).subscribe(Z=>{this.message.success("\u53d1\u5e03\u6210\u529f!"),l(!0)},Z=>{s(!1)}):this.modelApi.publishToModel(a.id,null===(k=this.selectedGrp)||void 0===k?void 0:k.id).subscribe(Z=>{this.message.success("\u53d1\u5e03\u6210\u529f!"),l(!0)},Z=>{s(!1)})})})}deleteConfirm(a){this.modelApi.removeModel([a.id]).subscribe(l=>{this.message.success(`${this.i18n.translate("base.delete")}${this.i18n.translate("base.success")}`),this.getResModelList()})}selectedGroupHandler(a){!a||(this.selectedGrp=a,a.resourceType===this.groupType&&this.modelApi.getModelList(this.selectedGrp.id,this.selectedRowData.modelCategory).subscribe(l=>{l.map(s=>{s.title=s.name,s.key=s.id,s.isLeaf=!0}),this.groupTree.selectedNode.children=this.groupTree.selectedNode.children.filter(s=>!s.isLeaf),this.groupTree.selectedNode.addChildren(l)}))}}return g.\u0275fac=function(a){return new(a||g)(n.Y36(O.k5),n.Y36(C.wi),n.Y36(O.wt),n.Y36(v.Ye),n.Y36(z.dD),n.Y36(I.x8),n.Y36(R.M_))},g.\u0275cmp=n.Xpm({type:g,selectors:[["app-result"]],viewQuery:function(a,l){if(1&a&&(n.Gf(x,5),n.Gf(D,5),n.Gf(_,5),n.Gf(P,5),n.Gf(F,5),n.Gf(E,5),n.Gf(J,5)),2&a){let s;n.iGM(s=n.CRH())&&(l.blank=s.first),n.iGM(s=n.CRH())&&(l.portDataBox=s.first),n.iGM(s=n.CRH())&&(l.dataVis=s.first),n.iGM(s=n.CRH())&&(l.codemirror=s.first),n.iGM(s=n.CRH())&&(l.releasedModelTemp=s.first),n.iGM(s=n.CRH())&&(l.modelGroup=s.first),n.iGM(s=n.CRH())&&(l.groupTree=s.first)}},inputs:{taskId:"taskId",taskList:"taskList",selectedTask:"selectedTask"},features:[n.TTD],decls:86,vars:35,consts:[[1,"result-box","pr"],["dy-icon","","type","return",1,"pa",3,"nz-tooltip","click"],["class","sub-task-list","nz-dropdown","",3,"nzDropdownMenu",4,"ngIf"],["menu","nzDropdownMenu"],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"click",4,"ngFor","ngForOf"],["id","result",3,"selectedIndexChange"],["alias","\u6570\u636e","id","result"],[1,"tab-content"],[1,"tree-box","fl"],[1,"title"],[1,"content"],[3,"search"],["class","li-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"data-box","fr","pr"],["class","data-size fr",4,"ngIf"],[3,"selectedIndex","selectedIndexChange"],["alias","\u6570\u636e"],[1,"tab-content","tab-content-data"],["portDataBox",""],[1,"table-box"],[3,"nzData","nzFrontPagination"],["portDataTable",""],[3,"nzSortFn",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["titleTemplate",""],[1,"blank"],["blank",""],["alias","\u7edf\u8ba1"],[3,"taskId","resPort"],["alias","\u53ef\u89c6\u5316"],["dataVis",""],["alias","\u8f93\u5165/\u8f93\u51fa","id","result"],[1,"ioAction-box","pr"],[3,"nzData","nzShowPagination"],["ioActionTable",""],["nzShowSizeChanger","","nzShowQuickJumper","",3,"nzSize","nzPageIndex","nzPageSize","nzTotal","nzPageIndexChange","nzPageSizeChange"],["class","ioAction-data pa",4,"ngIf"],["alias","\u6a21\u578b","id","result"],[1,"model-box","fl","pr"],[3,"columns","data","selectedData"],[1,"model-detail","fr"],[3,"ngModel","options","ngModelChange"],["codemirror",""],["releasedModelTemp",""],["modelGroup",""],["nzCentered","","nzClassName","modal-size not-footer size-80",3,"nzVisible","nzTitle","nzFooter","nzVisibleChange","nzOnCancel"],[4,"nzModalContent"],["nz-dropdown","",1,"sub-task-list",3,"nzDropdownMenu"],["dy-icon","","type","right-arrow"],["nz-menu-item","",3,"click"],[1,"li-item",3,"click"],[1,"icon"],[1,"data-size","fr"],[3,"nzSortFn"],["nz-tooltip","",3,"nzTooltipTitle","nzTooltipTitleContext",4,"ngFor","ngForOf"],["nz-tooltip","",3,"nzTooltipTitle","nzTooltipTitleContext"],[1,"cell"],[1,"operation-column"],["dy-icon","","type","eye",3,"nz-tooltip","click",4,"ngIf"],["dy-icon","","type","a-01",3,"nz-tooltip","click",4,"ngIf"],["dy-icon","","type","eye",3,"nz-tooltip","click"],["dy-icon","","type","a-01",3,"nz-tooltip","click"],[1,"ioAction-data","pa"],[3,"ioAction","formatable","close"],[2,"margin-bottom","5px"],[3,"name","groupType","readonly","searchEnabled","selectedGroup"],["groupTree",""],[3,"ioAction"]],template:function(a,l){if(1&a&&(n.TgZ(0,"div",0)(1,"i",1),n.NdJ("click",function(){return l.goBack()}),n.ALo(2,"nzI18n"),n.qZA(),n.YNc(3,V,3,2,"a",2),n.TgZ(4,"nz-dropdown-menu",null,3)(6,"ul",4),n.YNc(7,Q,2,1,"li",5),n.qZA()(),n.TgZ(8,"dy-tabs",6),n.NdJ("selectedIndexChange",function(m){return l.tabSelectChange(m)}),n.TgZ(9,"dy-tab",7)(10,"div",8)(11,"div",9)(12,"div",10),n._uU(13,"\u6570\u636e\u5217\u8868"),n.qZA(),n.TgZ(14,"div",11)(15,"dy-search",12),n.NdJ("search",function(m){return l.searchHandler(m)}),n.qZA(),n.TgZ(16,"ul"),n.YNc(17,T,3,3,"li",13),n.qZA()()(),n.TgZ(18,"div",14),n.YNc(19,G,2,1,"div",15),n.TgZ(20,"dy-tabs",16),n.NdJ("selectedIndexChange",function(m){return l.selectedIndex=m})("selectedIndexChange",function(m){return l.selectedIndexChange(m)}),n.TgZ(21,"dy-tab",17)(22,"div",18,19)(24,"div",20)(25,"nz-table",21,22)(27,"thead")(28,"tr"),n.YNc(29,B,2,2,"th",23),n.qZA()(),n.TgZ(30,"tbody"),n.YNc(31,L,2,1,"tr",24),n.qZA()(),n.YNc(32,H,4,3,"ng-template",null,25,n.W1O),n._UZ(34,"p",26,27),n.qZA()()(),n.TgZ(36,"dy-tab",28)(37,"div",18)(38,"div",20),n._UZ(39,"app-stat-data",29),n.qZA()()(),n.TgZ(40,"dy-tab",30)(41,"div",18)(42,"div",20),n._UZ(43,"app-data-vis",29,31),n.qZA()()()()()()(),n.TgZ(45,"dy-tab",32)(46,"div",8)(47,"div",33)(48,"nz-table",34,35)(50,"thead")(51,"tr")(52,"th"),n._uU(53,"IO\u7c7b\u578b"),n.qZA(),n.TgZ(54,"th"),n._uU(55,"\u5b9e\u4f53\u7c7b\u578b"),n.qZA(),n.TgZ(56,"th"),n._uU(57,"\u5b9e\u4f53\u5b50\u7c7b\u578b"),n.qZA(),n.TgZ(58,"th"),n._uU(59,"\u5b9e\u4f53\u540d"),n.qZA(),n.TgZ(60,"th"),n._uU(61,"\u7b97\u5b50\u540d"),n.qZA(),n.TgZ(62,"th"),n._uU(63,"\u8bb0\u5f55\u6570"),n.qZA(),n.TgZ(64,"th"),n._uU(65,"\u5927\u5c0f(\u5b57\u8282)"),n.qZA(),n.TgZ(66,"th"),n._uU(67,"\u64cd\u4f5c"),n.qZA()()(),n.TgZ(68,"tbody"),n.YNc(69,$,19,11,"tr",24),n.qZA()(),n.TgZ(70,"nz-pagination",36),n.NdJ("nzPageIndexChange",function(m){return l.pageInfo.pageIndex=m})("nzPageSizeChange",function(m){return l.pageInfo.pageSize=m})("nzPageSizeChange",function(){return l.pageChangeHandler()})("nzPageIndexChange",function(){return l.pageChangeHandler()}),n.qZA(),n.YNc(71,K,2,3,"div",37),n.qZA()()(),n.TgZ(72,"dy-tab",38)(73,"div",8)(74,"div",39),n._UZ(75,"app-table",40),n.qZA(),n.TgZ(76,"div",41)(77,"dy-codemirror",42,43),n.NdJ("ngModelChange",function(m){return l.jsonData=m}),n.qZA()(),n.YNc(79,X,4,2,"ng-template",null,44,n.W1O),n.YNc(81,tt,3,6,"ng-template",null,45,n.W1O),n.qZA()()()(),n.TgZ(83,"nz-modal",46),n.NdJ("nzVisibleChange",function(m){return l.modalVisible=m})("nzOnCancel",function(){return l.handleCancel()}),n.ALo(84,"nzI18n"),n.YNc(85,nt,2,1,"ng-container",47),n.qZA()),2&a){const s=n.MAs(26),m=n.MAs(49);n.xp6(1),n.Q6J("nz-tooltip",n.lcZ(2,30,"base.return")),n.xp6(2),n.Q6J("ngIf",l.taskList&&l.taskList.length),n.xp6(4),n.Q6J("ngForOf",l.taskList),n.xp6(10),n.Q6J("ngForOf",l.treeData),n.xp6(2),n.Q6J("ngIf",!l.selectedIndex),n.xp6(1),n.Q6J("selectedIndex",l.selectedIndex),n.xp6(5),n.Q6J("nzData",l.portData)("nzFrontPagination",!1),n.xp6(4),n.Q6J("ngForOf",l.portDataColumns),n.xp6(2),n.Q6J("ngForOf",s.data),n.xp6(8),n.Q6J("taskId",(null==l.selectedTask?null:l.selectedTask.id)||l.taskId)("resPort",null==l.currentNode?null:l.currentNode.title),n.xp6(4),n.Q6J("taskId",(null==l.selectedTask?null:l.selectedTask.id)||l.taskId)("resPort",null==l.currentNode?null:l.currentNode.title),n.xp6(5),n.Q6J("nzData",l.ioActionList)("nzShowPagination",!1),n.xp6(21),n.Q6J("ngForOf",m.data),n.xp6(1),n.Q6J("nzSize","small")("nzPageIndex",l.pageInfo.pageIndex)("nzPageSize",l.pageInfo.pageSize)("nzTotal",l.pageInfo.pageTotal),n.xp6(1),n.Q6J("ngIf",l.ioAction),n.xp6(4),n.Q6J("columns",l.columns)("data",l.listOfData)("selectedData",l.selectedRowData),n.xp6(2),n.Q6J("ngModel",l.jsonData)("options",n.DdM(34,et)),n.xp6(6),n.Q6J("nzVisible",l.modalVisible)("nzTitle",n.lcZ(84,32,"compox.selectFile"))("nzFooter",null)}},styles:['html.default[_ngcontent-%COMP%]   html[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   body[_ngcontent-%COMP%]{min-width:1366px}html.default[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none}html.default[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin:0}html.default[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;flex:auto;flex-direction:column}html.default[_ngcontent-%COMP%]   .fdc[_ngcontent-%COMP%]{flex-direction:column}html.default[_ngcontent-%COMP%]   .fdr[_ngcontent-%COMP%]{flex-direction:row}html.default[_ngcontent-%COMP%]   .fauto[_ngcontent-%COMP%]{flex:auto}html.default[_ngcontent-%COMP%]   .pf[_ngcontent-%COMP%]{position:fixed}html.default[_ngcontent-%COMP%]   .pr[_ngcontent-%COMP%]{position:relative}html.default[_ngcontent-%COMP%]   .pa[_ngcontent-%COMP%]{position:absolute}html.default[_ngcontent-%COMP%]   .fl[_ngcontent-%COMP%]{float:left}html.default[_ngcontent-%COMP%]   .fr[_ngcontent-%COMP%]{float:right}html.default[_ngcontent-%COMP%]   .clear-f[_ngcontent-%COMP%]{clear:both}html.default[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#396669}html.default[_ngcontent-%COMP%]   .ant-table-pagination.ant-pagination[_ngcontent-%COMP%]{margin:0}html.default[_ngcontent-%COMP%]   .ant-pagination[_ngcontent-%COMP%]{text-align:right}html.default[_ngcontent-%COMP%]   .ant-table-column-sorter[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-table-filter-trigger[_ngcontent-%COMP%]{color:#a1a1a1}html.default[_ngcontent-%COMP%]   .ant-table-filter-trigger.active[_ngcontent-%COMP%]{color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-table-thead[_ngcontent-%COMP%]   th.ant-table-column-sort[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-table-thead[_ngcontent-%COMP%]   th.ant-table-column-has-sorters[_ngcontent-%COMP%]:hover{background:#e2eeee}html.default[_ngcontent-%COMP%]   .ant-tree-switcher[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-tree-indent-unit[_ngcontent-%COMP%]{width:17px;color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-tree[_ngcontent-%COMP%]   .ant-tree-node-content-wrapper[_ngcontent-%COMP%]{padding:0}html.default[_ngcontent-%COMP%]   .ant-tree-checkbox-inner[_ngcontent-%COMP%]{display:inline-block}html.default[_ngcontent-%COMP%]   .ant-select-tree[_ngcontent-%COMP%]   .ant-select-tree-node-content-wrapper.ant-select-tree-node-selected[_ngcontent-%COMP%]:hover{background-color:#e2eeee}html.default[_ngcontent-%COMP%]   .ant-modal-title[_ngcontent-%COMP%]{color:#396669}html.default[_ngcontent-%COMP%]   .ant-dropdown-menu-item-selected[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-dropdown-menu-submenu-title-selected[_ngcontent-%COMP%]{background-color:#e2eeee}html.default[_ngcontent-%COMP%]   .ant-badge-status-processing[_ngcontent-%COMP%]{background-color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-badge-status-processing[_ngcontent-%COMP%]:after{border-color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-tooltip[_ngcontent-%COMP%]{max-width:550px;max-height:550px;overflow:hidden}html.default[_ngcontent-%COMP%]   .ant-tooltip-content[_ngcontent-%COMP%]{width:100%;height:100%;max-width:550px;max-height:542px}html.default[_ngcontent-%COMP%]   .ant-tooltip-inner[_ngcontent-%COMP%]{box-shadow:none}html.default   [_nghost-%COMP%]   .result-box[_ngcontent-%COMP%]{width:100%;height:100%}html.default   [_nghost-%COMP%]   .result-box[_ngcontent-%COMP%]   .sub-task-list[_ngcontent-%COMP%]{position:absolute;left:50%;top:3px;transform:translate(-50%)}html.default   [_nghost-%COMP%]   .result-box[_ngcontent-%COMP%]   .sub-task-list[_ngcontent-%COMP%]   .ic-right-arrow[_ngcontent-%COMP%]{transform:rotate(90deg);position:absolute;right:-15px}html.default   [_nghost-%COMP%]   .result-box[_ngcontent-%COMP%]   .ic-return[_ngcontent-%COMP%]{right:15px;top:-9px}html.default   [_nghost-%COMP%]   .result-box[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:22px}html.default   [_nghost-%COMP%]   .result-box[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   i.ic-eye[_ngcontent-%COMP%]{margin-right:12px}html.default   [_nghost-%COMP%]   .tab-content[_ngcontent-%COMP%]{width:100%;height:calc(100% - 25px);padding:15px;background-color:#fbffff;overflow:auto}html.default   [_nghost-%COMP%]   .tree-box[_ngcontent-%COMP%]{width:15%;height:100%;overflow:hidden;background-color:#f7fdfd}html.default   [_nghost-%COMP%]   .tree-box[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:100%;height:23px;line-height:23px;padding-left:13px;background-color:#c8dde0;white-space:nowrap;border-top:1px solid #dbe9ea;color:#396669}html.default   [_nghost-%COMP%]   .tree-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:8px;overflow-y:auto;height:calc(100% - 23px);border:solid 1px #dbe9ea;border-top:none}html.default   [_nghost-%COMP%]   .tree-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]     .dy-search{margin-bottom:5px}html.default   [_nghost-%COMP%]   .tree-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .li-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:2px 11px;cursor:pointer}html.default   [_nghost-%COMP%]   .tree-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .li-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px;background:url(suanzi.552f9ab3f834d2b1.png) no-repeat 100%/100%;margin-right:5px}html.default   [_nghost-%COMP%]   .tree-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .li-item.selected[_ngcontent-%COMP%], html.default   [_nghost-%COMP%]   .tree-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .li-item[_ngcontent-%COMP%]:hover{color:#2a8b92;background-color:#e2eeee}html.default   [_nghost-%COMP%]   .data-box[_ngcontent-%COMP%]{width:85%;height:100%;padding-left:15px}html.default   [_nghost-%COMP%]   .data-box[_ngcontent-%COMP%]   .data-size[_ngcontent-%COMP%]   .ant-input-number-input[_ngcontent-%COMP%]{height:25px}html.default   [_nghost-%COMP%]   .data-box[_ngcontent-%COMP%]   .tab-content-data[_ngcontent-%COMP%]{height:calc(100% - 32px);padding:15px 0 0}html.default   [_nghost-%COMP%]   .data-box[_ngcontent-%COMP%]   .tab-content-data[_ngcontent-%COMP%]   .table-box[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto}html.default   [_nghost-%COMP%]   .data-box[_ngcontent-%COMP%]   .tab-content-data[_ngcontent-%COMP%]   .blank[_ngcontent-%COMP%]{margin:0;height:1px}html.default   [_nghost-%COMP%]   .data-box[_ngcontent-%COMP%]     .dy-tabs-header{padding:0 0 8px;background-color:#fbffff;border-bottom:solid 1px #dbe9ea}html.default   [_nghost-%COMP%]   .data-box[_ngcontent-%COMP%]     .dy-tabs-header-item.active{position:relative}html.default   [_nghost-%COMP%]   .data-box[_ngcontent-%COMP%]     .dy-tabs-header-item.active:after{content:"";position:absolute;width:100%;height:2px;background-color:#2a8b92;left:0;bottom:-9px}html.default   [_nghost-%COMP%]   .ioAction-box[_ngcontent-%COMP%]{width:100%;height:100%}html.default   [_nghost-%COMP%]   .model-box[_ngcontent-%COMP%]{width:70%;height:100%;border:solid 1px #dbe9ea;overflow:auto}html.default   [_nghost-%COMP%]   .model-box[_ngcontent-%COMP%]     .ic-fabu{position:relative;top:-1px;font-size:19px}html.default   [_nghost-%COMP%]   .model-detail[_ngcontent-%COMP%]{width:calc(30% - 15px);height:100%}html.default   [_nghost-%COMP%]   .ioAction-data[_ngcontent-%COMP%]{left:0;top:0;width:100%;height:100%;background-color:#fbffff;z-index:2}html.dark   [_nghost-%COMP%]   .result-box[_ngcontent-%COMP%]{width:100%;height:100%}html.dark   [_nghost-%COMP%]   .result-box[_ngcontent-%COMP%]   .sub-task-list[_ngcontent-%COMP%]{position:absolute;left:50%;top:3px;transform:translate(-50%)}html.dark   [_nghost-%COMP%]   .result-box[_ngcontent-%COMP%]   .sub-task-list[_ngcontent-%COMP%]   .ic-right-arrow[_ngcontent-%COMP%]{transform:rotate(90deg);position:absolute;right:-15px}html.dark   [_nghost-%COMP%]   .result-box[_ngcontent-%COMP%]   .ic-return[_ngcontent-%COMP%]{right:15px;top:-9px}html.dark   [_nghost-%COMP%]   .result-box[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:22px}html.dark   [_nghost-%COMP%]   .result-box[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   i.ic-eye[_ngcontent-%COMP%]{margin-right:12px}html.dark   [_nghost-%COMP%]   .tab-content[_ngcontent-%COMP%]{width:100%;height:calc(100% - 25px);padding:15px;background-color:#fbfcff;overflow:auto}html.dark   [_nghost-%COMP%]   .tree-box[_ngcontent-%COMP%]{width:15%;height:100%;overflow:hidden;background-color:#f4f7fc}html.dark   [_nghost-%COMP%]   .tree-box[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:100%;height:23px;line-height:23px;padding-left:13px;background-color:#d8e2f0;white-space:nowrap;border-top:1px solid #dbe9ea;color:#394f69}html.dark   [_nghost-%COMP%]   .tree-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:8px;overflow-y:auto;height:calc(100% - 23px);border:solid 1px #dbe9ea;border-top:none}html.dark   [_nghost-%COMP%]   .tree-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]     .dy-search{margin-bottom:5px}html.dark   [_nghost-%COMP%]   .tree-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .li-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:2px 11px;cursor:pointer}html.dark   [_nghost-%COMP%]   .tree-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .li-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px;background:url(suanzi.552f9ab3f834d2b1.png) no-repeat 100%/100%;margin-right:5px}html.dark   [_nghost-%COMP%]   .tree-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .li-item.selected[_ngcontent-%COMP%], html.dark   [_nghost-%COMP%]   .tree-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .li-item[_ngcontent-%COMP%]:hover{color:#275184;background-color:#e6edf7}html.dark   [_nghost-%COMP%]   .data-box[_ngcontent-%COMP%]{width:85%;height:100%;padding-left:15px}html.dark   [_nghost-%COMP%]   .data-box[_ngcontent-%COMP%]   .data-size[_ngcontent-%COMP%]   .ant-input-number-input[_ngcontent-%COMP%]{height:25px}html.dark   [_nghost-%COMP%]   .data-box[_ngcontent-%COMP%]   .tab-content-data[_ngcontent-%COMP%]{height:calc(100% - 32px);padding:15px 0 0}html.dark   [_nghost-%COMP%]   .data-box[_ngcontent-%COMP%]   .tab-content-data[_ngcontent-%COMP%]   .table-box[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto}html.dark   [_nghost-%COMP%]   .data-box[_ngcontent-%COMP%]   .tab-content-data[_ngcontent-%COMP%]   .blank[_ngcontent-%COMP%]{margin:0;height:1px}html.dark   [_nghost-%COMP%]   .data-box[_ngcontent-%COMP%]     .dy-tabs-header{padding:0 0 8px;background-color:#fbfcff;border-bottom:solid 1px #dbe9ea}html.dark   [_nghost-%COMP%]   .data-box[_ngcontent-%COMP%]     .dy-tabs-header-item.active{position:relative}html.dark   [_nghost-%COMP%]   .data-box[_ngcontent-%COMP%]     .dy-tabs-header-item.active:after{content:"";position:absolute;width:100%;height:2px;background-color:#275184;left:0;bottom:-9px}html.dark   [_nghost-%COMP%]   .ioAction-box[_ngcontent-%COMP%]{width:100%;height:100%}html.dark   [_nghost-%COMP%]   .model-box[_ngcontent-%COMP%]{width:70%;height:100%;border:solid 1px #dbe9ea;overflow:auto}html.dark   [_nghost-%COMP%]   .model-box[_ngcontent-%COMP%]     .ic-fabu{position:relative;top:-1px;font-size:19px}html.dark   [_nghost-%COMP%]   .model-detail[_ngcontent-%COMP%]{width:calc(30% - 15px);height:100%}html.dark   [_nghost-%COMP%]   .ioAction-data[_ngcontent-%COMP%]{left:0;top:0;width:100%;height:100%;background-color:#fbfcff;z-index:2}html.light-blue   [_nghost-%COMP%]   .result-box[_ngcontent-%COMP%]{width:100%;height:100%}html.light-blue   [_nghost-%COMP%]   .result-box[_ngcontent-%COMP%]   .sub-task-list[_ngcontent-%COMP%]{position:absolute;left:50%;top:3px;transform:translate(-50%)}html.light-blue   [_nghost-%COMP%]   .result-box[_ngcontent-%COMP%]   .sub-task-list[_ngcontent-%COMP%]   .ic-right-arrow[_ngcontent-%COMP%]{transform:rotate(90deg);position:absolute;right:-15px}html.light-blue   [_nghost-%COMP%]   .result-box[_ngcontent-%COMP%]   .ic-return[_ngcontent-%COMP%]{right:15px;top:-9px}html.light-blue   [_nghost-%COMP%]   .result-box[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:22px}html.light-blue   [_nghost-%COMP%]   .result-box[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   i.ic-eye[_ngcontent-%COMP%]{margin-right:12px}html.light-blue   [_nghost-%COMP%]   .tab-content[_ngcontent-%COMP%]{width:100%;height:calc(100% - 25px);padding:15px;background-color:#fff;overflow:auto}html.light-blue   [_nghost-%COMP%]   .tree-box[_ngcontent-%COMP%]{width:15%;height:100%;overflow:hidden;background-color:#f9faff}html.light-blue   [_nghost-%COMP%]   .tree-box[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:100%;height:23px;line-height:23px;padding-left:13px;background-color:#eeedff;white-space:nowrap;border-top:1px solid #eeefff;color:#001f9b}html.light-blue   [_nghost-%COMP%]   .tree-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:8px;overflow-y:auto;height:calc(100% - 23px);border:solid 1px #eeefff;border-top:none}html.light-blue   [_nghost-%COMP%]   .tree-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]     .dy-search{margin-bottom:5px}html.light-blue   [_nghost-%COMP%]   .tree-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .li-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:2px 11px;cursor:pointer}html.light-blue   [_nghost-%COMP%]   .tree-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .li-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px;background:url(suanzi.552f9ab3f834d2b1.png) no-repeat 100%/100%;margin-right:5px}html.light-blue   [_nghost-%COMP%]   .tree-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .li-item.selected[_ngcontent-%COMP%], html.light-blue   [_nghost-%COMP%]   .tree-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .li-item[_ngcontent-%COMP%]:hover{color:#6e8bff;background-color:#e0ebff}html.light-blue   [_nghost-%COMP%]   .data-box[_ngcontent-%COMP%]{width:85%;height:100%;padding-left:15px}html.light-blue   [_nghost-%COMP%]   .data-box[_ngcontent-%COMP%]   .data-size[_ngcontent-%COMP%]   .ant-input-number-input[_ngcontent-%COMP%]{height:25px}html.light-blue   [_nghost-%COMP%]   .data-box[_ngcontent-%COMP%]   .tab-content-data[_ngcontent-%COMP%]{height:calc(100% - 32px);padding:15px 0 0}html.light-blue   [_nghost-%COMP%]   .data-box[_ngcontent-%COMP%]   .tab-content-data[_ngcontent-%COMP%]   .table-box[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto}html.light-blue   [_nghost-%COMP%]   .data-box[_ngcontent-%COMP%]   .tab-content-data[_ngcontent-%COMP%]   .blank[_ngcontent-%COMP%]{margin:0;height:1px}html.light-blue   [_nghost-%COMP%]   .data-box[_ngcontent-%COMP%]     .dy-tabs-header{padding:0 0 8px;background-color:#fff;border-bottom:solid 1px #eeefff}html.light-blue   [_nghost-%COMP%]   .data-box[_ngcontent-%COMP%]     .dy-tabs-header-item.active{position:relative}html.light-blue   [_nghost-%COMP%]   .data-box[_ngcontent-%COMP%]     .dy-tabs-header-item.active:after{content:"";position:absolute;width:100%;height:2px;background-color:#6e8bff;left:0;bottom:-9px}html.light-blue   [_nghost-%COMP%]   .ioAction-box[_ngcontent-%COMP%]{width:100%;height:100%}html.light-blue   [_nghost-%COMP%]   .model-box[_ngcontent-%COMP%]{width:70%;height:100%;border:solid 1px #eeefff;overflow:auto}html.light-blue   [_nghost-%COMP%]   .model-box[_ngcontent-%COMP%]     .ic-fabu{position:relative;top:-1px;font-size:19px}html.light-blue   [_nghost-%COMP%]   .model-detail[_ngcontent-%COMP%]{width:calc(30% - 15px);height:100%}html.light-blue   [_nghost-%COMP%]   .ioAction-data[_ngcontent-%COMP%]{left:0;top:0;width:100%;height:100%;background-color:#fff;z-index:2}'],data:{animation:[t.MC]}}),g})()},85081:(q,A,d)=>{d.d(A,{P:()=>pt});var o=d(82886),t=d(5e3),y=d(14581),n=d(31453),O=d(69808),C=d(50939),v=d(93075);const z=["blank"];function I(r,h){if(1&r&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&r){const e=h.$implicit;t.xp6(1),t.Oqu(e.columnName)}}function R(r,h){if(1&r&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&r){const e=h.$implicit;t.xp6(1),t.Oqu(e)}}function x(r,h){if(1&r&&(t.TgZ(0,"tr"),t.YNc(1,R,2,1,"td",8),t.qZA()),2&r){const e=h.$implicit;t.xp6(1),t.Q6J("ngForOf",e)}}function D(r,h){if(1&r&&(t.TgZ(0,"div",4)(1,"div",5)(2,"nz-table",6,7)(4,"thead")(5,"tr"),t.YNc(6,I,2,1,"th",8),t.qZA()(),t.TgZ(7,"tbody"),t.YNc(8,x,2,1,"tr",8),t.qZA()(),t._UZ(9,"p",9,10),t.qZA()()),2&r){const e=t.MAs(3),i=t.oxw();t.xp6(2),t.Q6J("nzData",i.data)("nzFrontPagination",!1),t.xp6(4),t.Q6J("ngForOf",i.columns),t.xp6(2),t.Q6J("ngForOf",e.data)}}const _=function(){return{mode:"text/xml",readOnly:!0}};function P(r,h){if(1&r){const e=t.EpF();t.TgZ(0,"div",4)(1,"dy-codemirror",11),t.NdJ("ngModelChange",function(c){return t.CHM(e),t.oxw().data=c}),t.qZA()()}if(2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngModel",e.data)("options",t.DdM(2,_))}}let F=(()=>{class r{constructor(e){this.api=e,this.close=new t.vpe,this.dataType="json",this.dataSize=100,this.pageNumber=1,this.pageSize=100,this.loading=!0}ngOnInit(){this.getResData()}ngAfterViewInit(){new IntersectionObserver(i=>{if(i[0].isIntersecting){if(this.loading)return;this.pageNumber++,this.getResData()}}).observe(this.blank.nativeElement)}getResData(){this.loading=!0,this.formatable?this.api.getIoActionFormatedData(this.ioAction.id,this.pageNumber,this.pageSize).subscribe(e=>{this.loading=!1,this.parseData(e)}):this.api.getIoActionData(this.ioAction.id,this.dataSize).subscribe(e=>{this.loading=!1,this.parseData(e)})}parseData(e){if(this.dataType=e.dataType,"json"===this.dataType){let i=JSON.parse(e.result);this.columns=i.columnSetMetadata.columns,this.data=this.data?this.data.concat(i.data):i.data}else this.data=e.result}goBack(){this.close.emit()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(y.k5))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-io-data"]],viewQuery:function(e,i){if(1&e&&t.Gf(z,5),2&e){let c;t.iGM(c=t.CRH())&&(i.blank=c.first)}},inputs:{ioAction:"ioAction",formatable:"formatable"},outputs:{close:"close"},decls:6,vars:2,consts:[[1,"bread-crumb"],["dy-icon","","type","return",3,"click"],["class","box",4,"ngIf","ngIfElse"],["textData",""],[1,"box"],[1,"table-box"],[3,"nzData","nzFrontPagination"],["ioDataTable",""],[4,"ngFor","ngForOf"],[1,"blank"],["blank",""],[3,"ngModel","options","ngModelChange"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t._UZ(1,"span"),t.TgZ(2,"i",1),t.NdJ("click",function(){return i.goBack()}),t.qZA()(),t.YNc(3,D,11,4,"div",2),t.YNc(4,P,2,3,"ng-template",null,3,t.W1O)),2&e){const c=t.MAs(5);t.xp6(3),t.Q6J("ngIf","json"===i.dataType)("ngIfElse",c)}},directives:[n.kE,O.O5,C.N8,C.Om,C.$Z,O.sg,C.Uo,C._C,C.p0,n.vf,v.JJ,v.On],styles:["[_nghost-%COMP%]{height:100%}[_nghost-%COMP%]   .box[_ngcontent-%COMP%]{padding-top:5px;width:100%;height:calc(100% - 25px)}[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .data-size[_ngcontent-%COMP%]{margin-bottom:5px}[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .table-box[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto}[_nghost-%COMP%]   .box[_ngcontent-%COMP%]     .ant-input-number-input{height:22px;padding:0 7px}[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .blank[_ngcontent-%COMP%]{margin:0;height:1px}"]}),r})();var E=d(74736),J=d(57781),V=d(404);function Q(r,h){if(1&r&&(t.TgZ(0,"th",4),t._uU(1),t.qZA()),2&r){const e=h.$implicit;t.Q6J("nzLeft",e.nzLeft||!1),t.xp6(1),t.Oqu(e.i18n)}}const T=function(r,h){return{backgroundColor:r,color:h}};function G(r,h){if(1&r&&(t.TgZ(0,"tr")(1,"td",5),t._uU(2),t.qZA(),t.TgZ(3,"td",6)(4,"div",7),t._uU(5),t.qZA()(),t.TgZ(6,"td",6)(7,"div",7),t._uU(8),t.qZA()(),t.TgZ(9,"td",6)(10,"div",7),t._uU(11),t.qZA()(),t.TgZ(12,"td",6)(13,"div",7),t._uU(14),t.qZA()(),t.TgZ(15,"td",6)(16,"div",7),t._uU(17),t.qZA()(),t.TgZ(18,"td",6)(19,"div",7),t._uU(20),t.qZA()(),t.TgZ(21,"td",6)(22,"div",7),t._uU(23),t._UZ(24,"i",8),t.qZA()(),t.TgZ(25,"td",6)(26,"div",7),t._uU(27),t._UZ(28,"i",8),t.qZA()(),t.TgZ(29,"td",6)(30,"div",7),t._uU(31),t.qZA()(),t.TgZ(32,"td",6)(33,"div",7),t._uU(34),t.qZA()(),t.TgZ(35,"td",6)(36,"div",7),t._uU(37),t._UZ(38,"i",8),t.qZA()(),t.TgZ(39,"td",6)(40,"div",7),t._uU(41),t.qZA()(),t.TgZ(42,"td",6)(43,"div",7),t._uU(44),t.qZA()(),t.TgZ(45,"td",6)(46,"div",7),t._uU(47),t.qZA()(),t.TgZ(48,"td",6)(49,"div",7),t._uU(50),t.qZA()()()),2&r){const e=h.$implicit;t.xp6(2),t.hij(" ",e.columnName," "),t.xp6(2),t.Q6J("ngStyle",t.WLB(34,T,null==e.columnType?null:e.columnType.bgColor,null==e.columnType?null:e.columnType.txtColor)),t.xp6(1),t.Oqu(null==e.columnType?null:e.columnType.name),t.xp6(2),t.Q6J("ngStyle",t.WLB(37,T,null==e.valueCount?null:e.valueCount.bgColor,null==e.valueCount?null:e.valueCount.txtColor)),t.xp6(1),t.Oqu(null==e.valueCount?null:e.valueCount.value),t.xp6(2),t.Q6J("ngStyle",t.WLB(40,T,null==e.missingValueCount?null:e.missingValueCount.bgColor,null==e.missingValueCount?null:e.missingValueCount.txtColor)),t.xp6(1),t.Oqu(null==e.missingValueCount?null:e.missingValueCount.value),t.xp6(2),t.Q6J("ngStyle",t.WLB(43,T,null==e.missingValueRatio?null:e.missingValueRatio.bgColor,null==e.missingValueRatio?null:e.missingValueRatio.txtColor)),t.xp6(1),t.Oqu(null==e.missingValueRatio?null:e.missingValueRatio.value),t.xp6(2),t.Q6J("ngStyle",t.WLB(46,T,null==e.distinctValueCount?null:e.distinctValueCount.bgColor,null==e.distinctValueCount?null:e.distinctValueCount.txtColor)),t.xp6(1),t.Oqu(null==e.distinctValueCount?null:e.distinctValueCount.value),t.xp6(2),t.Q6J("ngStyle",t.WLB(49,T,null==e.distinctValues?null:e.distinctValues.bgColor,null==e.distinctValues?null:e.distinctValues.txtColor)),t.xp6(1),t.Oqu(null==e.distinctValues?null:e.distinctValues.value),t.xp6(2),t.Q6J("ngStyle",t.WLB(52,T,null==e.max?null:e.max.bgColor,null==e.max?null:e.max.txtColor)),t.xp6(1),t.hij(" ",null==e.max?null:e.max.value," "),t.xp6(1),t.Q6J("nz-tooltip","\u51fa\u73b0\u6b21\u6570\uff1a"+(null==e.max?null:e.max.count)),t.xp6(2),t.Q6J("ngStyle",t.WLB(55,T,null==e.min?null:e.min.bgColor,null==e.min?null:e.min.txtColor)),t.xp6(1),t.hij(" ",null==e.min?null:e.min.value," "),t.xp6(1),t.Q6J("nz-tooltip","\u51fa\u73b0\u6b21\u6570\uff1a"+(null==e.min?null:e.min.count)),t.xp6(2),t.Q6J("ngStyle",t.WLB(58,T,null==e.mean?null:e.mean.bgColor,null==e.mean?null:e.mean.txtColor)),t.xp6(1),t.Oqu(null==e.mean?null:e.mean.value),t.xp6(2),t.Q6J("ngStyle",t.WLB(61,T,null==e.median?null:e.median.bgColor,null==e.median?null:e.median.txtColor)),t.xp6(1),t.Oqu(null==e.median?null:e.median.value),t.xp6(2),t.Q6J("ngStyle",t.WLB(64,T,null==e.mode?null:e.mode.bgColor,null==e.mode?null:e.mode.txtColor)),t.xp6(1),t.hij(" ",null==e.mode?null:e.mode.value," "),t.xp6(1),t.Q6J("nz-tooltip","\u51fa\u73b0\u6b21\u6570\uff1a"+(null==e.mode?null:e.mode.count)),t.xp6(2),t.Q6J("ngStyle",t.WLB(67,T,null==e.variance?null:e.variance.bgColor,null==e.variance?null:e.variance.txtColor)),t.xp6(1),t.Oqu(null==e.variance?null:e.variance.value),t.xp6(2),t.Q6J("ngStyle",t.WLB(70,T,null==e.standardDeviation?null:e.standardDeviation.bgColor,null==e.standardDeviation?null:e.standardDeviation.txtColor)),t.xp6(1),t.Oqu(null==e.standardDeviation?null:e.standardDeviation.value),t.xp6(2),t.Q6J("ngStyle",t.WLB(73,T,null==e.kurtosis?null:e.kurtosis.bgColor,null==e.kurtosis?null:e.kurtosis.txtColor)),t.xp6(1),t.Oqu(null==e.kurtosis?null:e.kurtosis.value),t.xp6(2),t.Q6J("ngStyle",t.WLB(76,T,null==e.skewness?null:e.skewness.bgColor,null==e.skewness?null:e.skewness.txtColor)),t.xp6(1),t.Oqu(null==e.skewness?null:e.skewness.value)}}const B={Null:{bgColor:"#f5f0f4",txtColor:"#915d7d"},String:{bgColor:"#f5f0f6",txtColor:"#8f6396"},Integer:{bgColor:"#f3f1f6",txtColor:"#7b6597"},Long:{bgColor:"#f2f1f7",txtColor:"#6c6aa2"},Datetime:{bgColor:"#f2f3f7",txtColor:"#65748e"},Float:{bgColor:"#eef3f6",txtColor:"#42657d"},Double:{bgColor:"#eff4f7",txtColor:"#567c98"},Boolean:{bgColor:"#f0f4f3",txtColor:"#53848f"},Binary:{bgColor:"#f0f5ef",txtColor:"#5b8b73"},Enum:{bgColor:"#f3f4ee",txtColor:"#5c8b5b"},Array:{bgColor:"#f4f3ee",txtColor:"#6b7f4a"},Map:{bgColor:"#f7f3f0",txtColor:"#76783f"},Struct:{bgColor:"#f6f2ef",txtColor:"#a28a61"},Object:{bgColor:"#eef4f2",txtColor:"#946b54"}};let Y=(()=>{class r{constructor(e){this.api=e,this.columns=[{i18n:"\u5217\u540d\u79f0",field:"columnName",nzLeft:!0},{i18n:"\u5217\u7c7b\u578b",field:"columnType"},{i18n:"\u503c\u4e2a\u6570",field:"valueCount",bgColor:"#8a8bb9",txtColor:"#625f93",needGetColor:!0},{i18n:"\u7f3a\u5931\u503c\u4e2a\u6570",field:"missingValueCount",bgColor:"#8a8d3c",txtColor:"#656726",needGetColor:!0},{i18n:"\u7f3a\u5931\u503c\u6bd4\u4f8b",field:"missingValueRatio",bgColor:"#92ab69",txtColor:"#61773e",needGetColor:!0},{i18n:"\u552f\u4e00\u503c\u4e2a\u6570",field:"distinctValueCount",bgColor:"#78b7ae",txtColor:"#498075",needGetColor:!0},{i18n:"\u552f\u4e00\u503c\u5217\u8868",field:"distinctValues",bgColor:"#edf3f1",txtColor:"#5a9174"},{i18n:"\u6700\u5927\u503c | \u6700\u591a",field:"max",bgColor:"#b78465",txtColor:"#935a38",needGetColor:!0},{i18n:"\u6700\u5c0f\u503c | \u6700\u5c11",field:"min",bgColor:"#7675b1",txtColor:"#58558e",needGetColor:!0},{i18n:"\u5747\u503c",field:"mean",bgColor:"#4f7c9b",txtColor:"#487395",needGetColor:!0},{i18n:"\u4e2d\u4f4d\u6570",field:"median",bgColor:"#4f7c9b",txtColor:"#487395",needGetColor:!0},{i18n:"\u4f17\u6570",field:"mode",bgColor:"#b3966c",txtColor:"#9f8559",needGetColor:!0},{i18n:"\u65b9\u5dee",field:"variance",bgColor:"#b3966c",txtColor:"#9f8559",needGetColor:!0},{i18n:"\u6807\u51c6\u5dee",field:"standardDeviation",bgColor:"#75a3c4",txtColor:"#4e799b",needGetColor:!0},{i18n:"\u5cf0\u5ea6",field:"kurtosis",bgColor:"#6faab8",txtColor:"#497d8b",needGetColor:!0},{i18n:"\u504f\u5ea6",field:"skewness",bgColor:"#6faab8",txtColor:"#497d8b",needGetColor:!0}]}ngOnInit(){}ngOnChanges(e){if(e.resPort&&e.resPort.currentValue||e.taskId&&e.taskId.currentValue){if(!this.taskId||!this.resPort)return;this.api.getResPortStat(this.taskId,this.resPort).subscribe(i=>{this.data=i,this.parseData()})}}parseData(){let e,i,c,u;const w=this.columns.filter(f=>f.needGetColor).map(f=>(f.maxValue=Number.MIN_VALUE,f.minValue=Number.MAX_VALUE,f));this.data.map(f=>{w.map(p=>{var U,lt;"max"===p.field||"min"===p.field||"mode"===p.field?(p.maxValue=Math.max(p.maxValue,null===(U=f[p.field])||void 0===U?void 0:U.value),p.minValue=Math.min(p.minValue,null===(lt=f[p.field])||void 0===lt?void 0:lt.value)):(p.maxValue=Math.max(p.maxValue,f[p.field]),p.minValue=Math.min(p.minValue,f[p.field]))})}),this.data.map(f=>{e=B[f.columnType.name]||B.Null,f.columnType=Object.assign(Object.assign({},f.columnType),{bgColor:e.bgColor,txtColor:e.txtColor}),w.map(p=>{var U;"max"===p.field||"min"===p.field||"mode"===p.field?(i=p.maxValue===p.minValue?1:.05+((null===(U=f[p.field])||void 0===U?void 0:U.value)-p.minValue)/(p.maxValue-p.minValue)*.95,c=(0,J.PS)(p.bgColor,i),u=1===i?"#fff":p.txtColor,f[p.field]=Object.assign(Object.assign({},f[p.field]),{bgColor:c,txtColor:u})):(i=p.maxValue===p.minValue?1:.05+(f[p.field]-p.minValue)/(p.maxValue-p.minValue)*.95,c=(0,J.PS)(p.bgColor,i),u=1===i?"#fff":p.txtColor,f[p.field]={value:f[p.field],bgColor:c,txtColor:u})})})}testData(){const e=Object.keys(B);this.data=[];for(let i=0;i<20;i++){let c={};c.columnName=`column${i}`,c.columnType={name:e[Math.floor(Math.random()*e.length)]},c.valueCount=Math.floor(1e3*Math.random()),c.missingValueCount=Math.floor(10*Math.random()),c.missingValueRatio=Math.random().toFixed(2),c.distinctValueCount=Math.floor(10*Math.random()),c.distinctValues=[],c.max={value:Math.floor(100+400*Math.random()),count:Math.floor(10*Math.random())},c.min={value:Math.floor(100*Math.random()),count:Math.floor(10*Math.random())},c.mean=Math.floor(50*Math.random()),c.variance=Math.random().toFixed(2),c.standardDeviation=Math.random().toFixed(2),c.skewness=Math.random().toFixed(2),this.data.push(c)}}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(y.k5))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-stat-data"]],inputs:{taskId:"taskId",resPort:"resPort"},features:[t.TTD],decls:7,vars:4,consts:[["nzBordered","",3,"nzData","nzFrontPagination"],["basicTable",""],["nzAlign","center",3,"nzLeft",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["nzAlign","center",3,"nzLeft"],["nzAlign","center","nzLeft",""],["nzAlign","center"],[1,"cell",3,"ngStyle"],["dy-icon","","type","tishi",3,"nz-tooltip"]],template:function(e,i){if(1&e&&(t.TgZ(0,"nz-table",0,1)(2,"thead")(3,"tr"),t.YNc(4,Q,2,2,"th",2),t.qZA()(),t.TgZ(5,"tbody"),t.YNc(6,G,51,79,"tr",3),t.qZA()()),2&e){const c=t.MAs(1);t.Q6J("nzData",i.data)("nzFrontPagination",!1),t.xp6(4),t.Q6J("ngForOf",i.columns),t.xp6(2),t.Q6J("ngForOf",c.data)}},directives:[C.N8,C.Om,C.$Z,O.sg,C.Uo,C._C,C.UX,C.qn,C.p0,O.PC,n.kE,V.SY],styles:["html.default[_ngcontent-%COMP%]   html[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   body[_ngcontent-%COMP%]{min-width:1366px}html.default[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none}html.default[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin:0}html.default[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;flex:auto;flex-direction:column}html.default[_ngcontent-%COMP%]   .fdc[_ngcontent-%COMP%]{flex-direction:column}html.default[_ngcontent-%COMP%]   .fdr[_ngcontent-%COMP%]{flex-direction:row}html.default[_ngcontent-%COMP%]   .fauto[_ngcontent-%COMP%]{flex:auto}html.default[_ngcontent-%COMP%]   .pf[_ngcontent-%COMP%]{position:fixed}html.default[_ngcontent-%COMP%]   .pr[_ngcontent-%COMP%]{position:relative}html.default[_ngcontent-%COMP%]   .pa[_ngcontent-%COMP%]{position:absolute}html.default[_ngcontent-%COMP%]   .fl[_ngcontent-%COMP%]{float:left}html.default[_ngcontent-%COMP%]   .fr[_ngcontent-%COMP%]{float:right}html.default[_ngcontent-%COMP%]   .clear-f[_ngcontent-%COMP%]{clear:both}html.default[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#396669}html.default[_ngcontent-%COMP%]   .ant-table-pagination.ant-pagination[_ngcontent-%COMP%]{margin:0}html.default[_ngcontent-%COMP%]   .ant-pagination[_ngcontent-%COMP%]{text-align:right}html.default[_ngcontent-%COMP%]   .ant-table-column-sorter[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-table-filter-trigger[_ngcontent-%COMP%]{color:#a1a1a1}html.default[_ngcontent-%COMP%]   .ant-table-filter-trigger.active[_ngcontent-%COMP%]{color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-table-thead[_ngcontent-%COMP%]   th.ant-table-column-sort[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-table-thead[_ngcontent-%COMP%]   th.ant-table-column-has-sorters[_ngcontent-%COMP%]:hover{background:#e2eeee}html.default[_ngcontent-%COMP%]   .ant-tree-switcher[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-tree-indent-unit[_ngcontent-%COMP%]{width:17px;color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-tree[_ngcontent-%COMP%]   .ant-tree-node-content-wrapper[_ngcontent-%COMP%]{padding:0}html.default[_ngcontent-%COMP%]   .ant-tree-checkbox-inner[_ngcontent-%COMP%]{display:inline-block}html.default[_ngcontent-%COMP%]   .ant-select-tree[_ngcontent-%COMP%]   .ant-select-tree-node-content-wrapper.ant-select-tree-node-selected[_ngcontent-%COMP%]:hover{background-color:#e2eeee}html.default[_ngcontent-%COMP%]   .ant-modal-title[_ngcontent-%COMP%]{color:#396669}html.default[_ngcontent-%COMP%]   .ant-dropdown-menu-item-selected[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-dropdown-menu-submenu-title-selected[_ngcontent-%COMP%]{background-color:#e2eeee}html.default[_ngcontent-%COMP%]   .ant-badge-status-processing[_ngcontent-%COMP%]{background-color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-badge-status-processing[_ngcontent-%COMP%]:after{border-color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-tooltip[_ngcontent-%COMP%]{max-width:550px;max-height:550px;overflow:hidden}html.default[_ngcontent-%COMP%]   .ant-tooltip-content[_ngcontent-%COMP%]{width:100%;height:100%;max-width:550px;max-height:542px}html.default[_ngcontent-%COMP%]   .ant-tooltip-inner[_ngcontent-%COMP%]{box-shadow:none}html.default   [_nghost-%COMP%]{width:100%;height:100%}html.default   [_nghost-%COMP%]   div[_ngcontent-%COMP%]{width:100%;height:100%}html.default   [_nghost-%COMP%]   th[_ngcontent-%COMP%]{white-space:nowrap}html.default   [_nghost-%COMP%]   td[_ngcontent-%COMP%]{padding:5px}html.default   [_nghost-%COMP%]   td.ant-table-cell-fix-left[_ngcontent-%COMP%]{background-color:#fbffff}html.default   [_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{padding:3px 5px;text-align:center;max-width:255px!important}html.dark   [_nghost-%COMP%]{width:100%;height:100%}html.dark   [_nghost-%COMP%]   div[_ngcontent-%COMP%]{width:100%;height:100%}html.dark   [_nghost-%COMP%]   th[_ngcontent-%COMP%]{white-space:nowrap}html.dark   [_nghost-%COMP%]   td[_ngcontent-%COMP%]{padding:5px}html.dark   [_nghost-%COMP%]   td.ant-table-cell-fix-left[_ngcontent-%COMP%]{background-color:#fbfcff}html.dark   [_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{padding:3px 5px;text-align:center;max-width:255px!important}html.light-blue   [_nghost-%COMP%]{width:100%;height:100%}html.light-blue   [_nghost-%COMP%]   div[_ngcontent-%COMP%]{width:100%;height:100%}html.light-blue   [_nghost-%COMP%]   th[_ngcontent-%COMP%]{white-space:nowrap}html.light-blue   [_nghost-%COMP%]   td[_ngcontent-%COMP%]{padding:5px}html.light-blue   [_nghost-%COMP%]   td.ant-table-cell-fix-left[_ngcontent-%COMP%]{background-color:#fff}html.light-blue   [_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{padding:3px 5px;text-align:center;max-width:255px!important}"]}),r})();var j=d(28076),L=d(19345),H=d(91139),S=d(74543);const W=["chartBox"];let $=(()=>{class r{constructor(e){this.cdr=e,this.resizeAnimationTime=400,this.chartInit=new t.vpe}ngOnInit(){window.addEventListener("resize",()=>{this.chartInstance&&this.chartInstance.resize()})}ngOnChanges(e){this.chartBox&&(this.chartInstance&&this.chartInstance.dispose(),this.chartBox.clear(),this.ngAfterViewInit())}ngAfterViewInit(){if(!this.name||!S.O[this.name])return;let e=this.chartBox.createComponent(S.O[this.name].cpt).instance;e.resizeAnimationTime=this.resizeAnimationTime,this.chartInstance=e,this.chartInit.emit(this.chartInstance),this.cdr.detectChanges()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(t.sBO))},r.\u0275cmp=t.Xpm({type:r,selectors:[["chart-factory"]],viewQuery:function(e,i){if(1&e&&t.Gf(W,5,t.s_b),2&e){let c;t.iGM(c=t.CRH())&&(i.chartBox=c.first)}},hostAttrs:[1,"chart-factory"],inputs:{name:"name",resizeAnimationTime:"resizeAnimationTime"},outputs:{chartInit:"chartInit"},features:[t.TTD],decls:2,vars:0,consts:[["chartBox",""]],template:function(e,i){1&e&&t.GkF(0,null,0)},styles:[".chart-box[_ngcontent-%COMP%]{width:100%;height:100%;position:relative}"]}),r})();var K=d(5156),X=d(15213);function tt(r,h){if(1&r){const e=t.EpF();t.TgZ(0,"div",13),t.NdJ("click",function(){const u=t.CHM(e).$implicit;return t.oxw(2).selectedChart=u}),t.TgZ(1,"div",14),t._UZ(2,"div",15),t.qZA(),t.TgZ(3,"div"),t._uU(4),t.qZA()()}if(2&r){const e=h.$implicit;t.xp6(2),t.Q6J("path","./assets/img/chart/"+e.icon),t.xp6(2),t.Oqu(e.alias)}}function nt(r,h){if(1&r){const e=t.EpF();t.TgZ(0,"div",11),t.NdJ("mouseenter",function(){return t.CHM(e),t.oxw().mouseenterHandler()})("mouseleave",function(){return t.CHM(e),t.oxw().mouseleaveHandler()}),t.YNc(1,tt,5,2,"div",12),t.qZA()}if(2&r){const e=t.oxw();t.Q6J("@fadeMotion",void 0),t.xp6(1),t.Q6J("ngForOf",e.charts)}}function et(r,h){1&r&&t._UZ(0,"compox-factory",16),2&r&&t.Q6J("parameter",h.$implicit)}let ot=(()=>{class r{constructor(e,i){this.api=e,this.notiry=i,this.subscriptionArr=[],this.charts=Object.values(L.O3),this.chartsVisible=!1,this.cacheSelectedColumn={}}ngOnInit(){this.selectedChart=this.charts[0]}ngOnChanges(e){if(e.resPort&&e.resPort.currentValue||e.taskId&&e.taskId.currentValue){if(!this.taskId||!this.resPort)return;this.api.getResPortDataDim(this.taskId,this.resPort).subscribe(i=>{this.columns=i,this.merge(),this.getData()})}}chartInit(e){this.chartInstance=e;const i=H.n.parseParameters(this.chartInstance.parameters,"result_datavis");this.dataOpts=i.sightxTabs.find(c=>"data"===c.name).parameters,this.ngOnDestroy(),this.dataOpts.map(c=>{this.subscriptionArr.push(this.notiry.get(`result_datavis_${c.name}_vchange`).subscribe(u=>{this.cacheSelectedColumn[u.name]=u.value,this.setData2Chart()}))}),this.merge(),this.chartInstance.setParameter(i),this.data?this.chartInstance.setData(this.data):this.chartInstance.showDefaultData()}merge(){!this.dataOpts||!this.columns||(this.dataOpts.filter(e=>"dim"===e.dataFieldType).map(e=>{var i;const c=[];this.columns.dims&&this.columns.dims.length&&c.push({label:"\u63a8\u8350\u5b57\u6bb5",children:this.columns.dims.map(u=>(u.label=u.value=u.name,u))}),this.columns.indefiniteDims&&this.columns.indefiniteDims.length&&c.push({label:"\u5176\u4ed6\u5b57\u6bb5",children:this.columns.indefiniteDims.map(u=>(u.label=u.value=u.name,u))}),e.dataProvider=c,e.value=this.cacheSelectedColumn[e.name]||(null===(i=c[0])||void 0===i?void 0:i.children[0].label)}),this.dataOpts.filter(e=>"measure"===e.dataFieldType).map(e=>{var i;const c=[];this.columns.measureColumns&&this.columns.measureColumns.length&&c.push({label:"\u63a8\u8350\u5b57\u6bb5",children:this.columns.measureColumns.map(u=>(u.label=u.value=u.name,u))}),this.columns.indefiniteMeasures&&this.columns.indefiniteMeasures.length&&c.push({label:"\u5176\u4ed6\u5b57\u6bb5",children:this.columns.indefiniteMeasures.map(u=>(u.label=u.value=u.name,u))}),e.dataProvider=c,e.value=this.cacheSelectedColumn[e.name]||(null===(i=c[0])||void 0===i?void 0:i.children[0].label)}))}getData(){this.api.getResPortData(this.taskId,this.resPort,1,100).subscribe(e=>{let i=e;"json"===i.dataType&&(i=JSON.parse(i.result)),this.data=[],i.data.map(c=>{let u={};i.columnSetMetadata.columns.map((w,f)=>{u[w.columnName]=c[f]}),this.data.push(u)}),this.setData2Chart()})}setData2Chart(){!this.dataOpts.every(e=>e.value)||this.data&&this.chartInstance.setData(this.data)}resize(){this.chartInstance&&this.chartInstance.resize()}mouseenterHandler(){clearTimeout(this.chartsTimer),this.chartsVisible=!0}mouseleaveHandler(){this.chartsTimer=setTimeout(()=>{this.chartsVisible=!1},500)}ngOnDestroy(){this.subscriptionArr.map(e=>{e.unsubscribe()}),this.subscriptionArr.length=0}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(y.k5),t.Y36(J.c))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-data-vis"]],inputs:{taskId:"taskId",resPort:"resPort"},features:[t.TTD],decls:12,vars:4,consts:[[1,"left-box","fl","pr"],[1,"factory-box"],[3,"name","resizeAnimationTime","chartInit"],[1,"charts-icon","pa",3,"mouseenter","mouseleave"],["dy-icon","","type","chart"],[1,"corner"],["class","charts-list pa",3,"mouseenter","mouseleave",4,"ngIf"],[1,"right-box","fr"],[1,"title"],[1,"content"],[3,"parameter",4,"ngFor","ngForOf"],[1,"charts-list","pa",3,"mouseenter","mouseleave"],["class","chart",3,"click",4,"ngFor","ngForOf"],[1,"chart",3,"click"],[1,"img"],["svg-icon","",3,"path"],[3,"parameter"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"chart-factory",2),t.NdJ("chartInit",function(u){return i.chartInit(u)}),t.qZA()(),t.TgZ(3,"div",3),t.NdJ("mouseenter",function(){return i.mouseenterHandler()})("mouseleave",function(){return i.mouseleaveHandler()}),t._UZ(4,"i",4)(5,"i",5),t.qZA(),t.YNc(6,nt,2,2,"div",6),t.qZA(),t.TgZ(7,"div",7)(8,"div",8),t._uU(9,"\u6570\u636e\u5b57\u6bb5"),t.qZA(),t.TgZ(10,"div",9),t.YNc(11,et,1,1,"compox-factory",10),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("name",null==i.selectedChart?null:i.selectedChart.name)("resizeAnimationTime",0),t.xp6(4),t.Q6J("ngIf",i.chartsVisible),t.xp6(5),t.Q6J("ngForOf",i.dataOpts))},directives:[$,n.kE,O.O5,O.sg,K.W2,X._],styles:["html.default[_ngcontent-%COMP%]   html[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   body[_ngcontent-%COMP%]{min-width:1366px}html.default[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none}html.default[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin:0}html.default[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;flex:auto;flex-direction:column}html.default[_ngcontent-%COMP%]   .fdc[_ngcontent-%COMP%]{flex-direction:column}html.default[_ngcontent-%COMP%]   .fdr[_ngcontent-%COMP%]{flex-direction:row}html.default[_ngcontent-%COMP%]   .fauto[_ngcontent-%COMP%]{flex:auto}html.default[_ngcontent-%COMP%]   .pf[_ngcontent-%COMP%]{position:fixed}html.default[_ngcontent-%COMP%]   .pr[_ngcontent-%COMP%]{position:relative}html.default[_ngcontent-%COMP%]   .pa[_ngcontent-%COMP%]{position:absolute}html.default[_ngcontent-%COMP%]   .fl[_ngcontent-%COMP%]{float:left}html.default[_ngcontent-%COMP%]   .fr[_ngcontent-%COMP%]{float:right}html.default[_ngcontent-%COMP%]   .clear-f[_ngcontent-%COMP%]{clear:both}html.default[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#396669}html.default[_ngcontent-%COMP%]   .ant-table-pagination.ant-pagination[_ngcontent-%COMP%]{margin:0}html.default[_ngcontent-%COMP%]   .ant-pagination[_ngcontent-%COMP%]{text-align:right}html.default[_ngcontent-%COMP%]   .ant-table-column-sorter[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-table-filter-trigger[_ngcontent-%COMP%]{color:#a1a1a1}html.default[_ngcontent-%COMP%]   .ant-table-filter-trigger.active[_ngcontent-%COMP%]{color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-table-thead[_ngcontent-%COMP%]   th.ant-table-column-sort[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-table-thead[_ngcontent-%COMP%]   th.ant-table-column-has-sorters[_ngcontent-%COMP%]:hover{background:#e2eeee}html.default[_ngcontent-%COMP%]   .ant-tree-switcher[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-tree-indent-unit[_ngcontent-%COMP%]{width:17px;color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-tree[_ngcontent-%COMP%]   .ant-tree-node-content-wrapper[_ngcontent-%COMP%]{padding:0}html.default[_ngcontent-%COMP%]   .ant-tree-checkbox-inner[_ngcontent-%COMP%]{display:inline-block}html.default[_ngcontent-%COMP%]   .ant-select-tree[_ngcontent-%COMP%]   .ant-select-tree-node-content-wrapper.ant-select-tree-node-selected[_ngcontent-%COMP%]:hover{background-color:#e2eeee}html.default[_ngcontent-%COMP%]   .ant-modal-title[_ngcontent-%COMP%]{color:#396669}html.default[_ngcontent-%COMP%]   .ant-dropdown-menu-item-selected[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-dropdown-menu-submenu-title-selected[_ngcontent-%COMP%]{background-color:#e2eeee}html.default[_ngcontent-%COMP%]   .ant-badge-status-processing[_ngcontent-%COMP%]{background-color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-badge-status-processing[_ngcontent-%COMP%]:after{border-color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-tooltip[_ngcontent-%COMP%]{max-width:550px;max-height:550px;overflow:hidden}html.default[_ngcontent-%COMP%]   .ant-tooltip-content[_ngcontent-%COMP%]{width:100%;height:100%;max-width:550px;max-height:542px}html.default[_ngcontent-%COMP%]   .ant-tooltip-inner[_ngcontent-%COMP%]{box-shadow:none}html.default   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]{width:calc(100% - 300px);height:100%;padding:125px 100px}html.default   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .factory-box[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#fff;padding:50px;border-radius:3px}html.default   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .charts-icon[_ngcontent-%COMP%]{width:40px;height:38px;background-color:#2a8b92;border-radius:3px;display:flex;justify-content:center;align-items:center;cursor:pointer;left:0;top:0}html.default   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .charts-icon[_ngcontent-%COMP%]   .ic-chart[_ngcontent-%COMP%]{color:#fff;font-size:26px}html.default   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .charts-icon[_ngcontent-%COMP%]   .corner[_ngcontent-%COMP%]{position:absolute;right:2px;bottom:2px;width:0;height:0;border-bottom:6px solid #c8dde0;border-left:6px solid transparent}html.default   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .charts-list[_ngcontent-%COMP%]{left:39px;top:30px;background-color:#e2eeee;border:solid 1px #2a8b92;border-radius:3px;padding:20px 10px 15px;display:flex;max-width:1022px;max-height:500px;overflow-y:auto;z-index:9}html.default   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .charts-list[_ngcontent-%COMP%]   .chart[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:0 10px;transition:all .3s;cursor:pointer}html.default   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .charts-list[_ngcontent-%COMP%]   .chart[_ngcontent-%COMP%]:hover{color:#2a8b92}html.default   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .charts-list[_ngcontent-%COMP%]   .chart[_ngcontent-%COMP%]:hover   .img[_ngcontent-%COMP%]{border-color:#2a8b92}html.default   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .charts-list[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:65px;height:65px;background-color:#fff;margin-bottom:3px;display:flex;justify-content:center;align-items:center;border:solid 1px rgba(0,0,0,0);transition:all .15s;border-radius:3px}html.default   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .charts-list[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:40px;height:40px}html.default   [_nghost-%COMP%]   .right-box[_ngcontent-%COMP%]{width:300px;height:100%;border:solid 1px #dbe9ea;border-radius:3px;background-color:#f7fdfd}html.default   [_nghost-%COMP%]   .right-box[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:100%;height:23px;line-height:23px;padding-left:13px;background-color:#c8dde0;white-space:nowrap;color:#396669}html.default   [_nghost-%COMP%]   .right-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:8px;height:calc(100% - 23px)}html.default   [_nghost-%COMP%]   .right-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]     .ic-tishi, html.default   [_nghost-%COMP%]   .right-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]     .var-setting{display:none}html.default   [_nghost-%COMP%]   .right-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]     .compox-label{width:60px}html.default   [_nghost-%COMP%]   .right-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]     .compox-content{width:calc(100% - 60px)}html.dark   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]{width:calc(100% - 300px);height:100%;padding:125px 100px}html.dark   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .factory-box[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#fff;padding:50px;border-radius:3px}html.dark   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .charts-icon[_ngcontent-%COMP%]{width:40px;height:38px;background-color:#275184;border-radius:3px;display:flex;justify-content:center;align-items:center;cursor:pointer;left:0;top:0}html.dark   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .charts-icon[_ngcontent-%COMP%]   .ic-chart[_ngcontent-%COMP%]{color:#fff;font-size:26px}html.dark   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .charts-icon[_ngcontent-%COMP%]   .corner[_ngcontent-%COMP%]{position:absolute;right:2px;bottom:2px;width:0;height:0;border-bottom:6px solid #d8e2f0;border-left:6px solid transparent}html.dark   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .charts-list[_ngcontent-%COMP%]{left:39px;top:30px;background-color:#e6edf7;border:solid 1px #275184;border-radius:3px;padding:20px 10px 15px;display:flex;max-width:1022px;max-height:500px;overflow-y:auto;z-index:9}html.dark   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .charts-list[_ngcontent-%COMP%]   .chart[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:0 10px;transition:all .3s;cursor:pointer}html.dark   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .charts-list[_ngcontent-%COMP%]   .chart[_ngcontent-%COMP%]:hover{color:#275184}html.dark   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .charts-list[_ngcontent-%COMP%]   .chart[_ngcontent-%COMP%]:hover   .img[_ngcontent-%COMP%]{border-color:#275184}html.dark   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .charts-list[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:65px;height:65px;background-color:#fff;margin-bottom:3px;display:flex;justify-content:center;align-items:center;border:solid 1px rgba(0,0,0,0);transition:all .15s;border-radius:3px}html.dark   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .charts-list[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:40px;height:40px}html.dark   [_nghost-%COMP%]   .right-box[_ngcontent-%COMP%]{width:300px;height:100%;border:solid 1px #dbe9ea;border-radius:3px;background-color:#f4f7fc}html.dark   [_nghost-%COMP%]   .right-box[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:100%;height:23px;line-height:23px;padding-left:13px;background-color:#d8e2f0;white-space:nowrap;color:#394f69}html.dark   [_nghost-%COMP%]   .right-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:8px;height:calc(100% - 23px)}html.dark   [_nghost-%COMP%]   .right-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]     .ic-tishi, html.dark   [_nghost-%COMP%]   .right-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]     .var-setting{display:none}html.dark   [_nghost-%COMP%]   .right-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]     .compox-label{width:60px}html.dark   [_nghost-%COMP%]   .right-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]     .compox-content{width:calc(100% - 60px)}html.light-blue   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]{width:calc(100% - 300px);height:100%;padding:125px 100px}html.light-blue   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .factory-box[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#fff;padding:50px;border-radius:3px}html.light-blue   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .charts-icon[_ngcontent-%COMP%]{width:40px;height:38px;background-color:#6e8bff;border-radius:3px;display:flex;justify-content:center;align-items:center;cursor:pointer;left:0;top:0}html.light-blue   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .charts-icon[_ngcontent-%COMP%]   .ic-chart[_ngcontent-%COMP%]{color:#fff;font-size:26px}html.light-blue   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .charts-icon[_ngcontent-%COMP%]   .corner[_ngcontent-%COMP%]{position:absolute;right:2px;bottom:2px;width:0;height:0;border-bottom:6px solid #eeedff;border-left:6px solid transparent}html.light-blue   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .charts-list[_ngcontent-%COMP%]{left:39px;top:30px;background-color:#e0ebff;border:solid 1px #6e8bff;border-radius:3px;padding:20px 10px 15px;display:flex;max-width:1022px;max-height:500px;overflow-y:auto;z-index:9}html.light-blue   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .charts-list[_ngcontent-%COMP%]   .chart[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:0 10px;transition:all .3s;cursor:pointer}html.light-blue   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .charts-list[_ngcontent-%COMP%]   .chart[_ngcontent-%COMP%]:hover{color:#6e8bff}html.light-blue   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .charts-list[_ngcontent-%COMP%]   .chart[_ngcontent-%COMP%]:hover   .img[_ngcontent-%COMP%]{border-color:#6e8bff}html.light-blue   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .charts-list[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:65px;height:65px;background-color:#fff;margin-bottom:3px;display:flex;justify-content:center;align-items:center;border:solid 1px rgba(0,0,0,0);transition:all .15s;border-radius:3px}html.light-blue   [_nghost-%COMP%]   .left-box[_ngcontent-%COMP%]   .charts-list[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:40px;height:40px}html.light-blue   [_nghost-%COMP%]   .right-box[_ngcontent-%COMP%]{width:300px;height:100%;border:solid 1px #eeefff;border-radius:3px;background-color:#f9faff}html.light-blue   [_nghost-%COMP%]   .right-box[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:100%;height:23px;line-height:23px;padding-left:13px;background-color:#eeedff;white-space:nowrap;color:#001f9b}html.light-blue   [_nghost-%COMP%]   .right-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:8px;height:calc(100% - 23px)}html.light-blue   [_nghost-%COMP%]   .right-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]     .ic-tishi, html.light-blue   [_nghost-%COMP%]   .right-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]     .var-setting{display:none}html.light-blue   [_nghost-%COMP%]   .right-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]     .compox-label{width:60px}html.light-blue   [_nghost-%COMP%]   .right-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]     .compox-content{width:calc(100% - 60px)}"],data:{animation:[j.MC]}}),r})();var g=d(41733),M=d(4128),a=d(46055),l=d(89445),s=d(71758);const m=["contentBox"];function b(r,h){if(1&r){const e=t.EpF();t.TgZ(0,"nz-breadcrumb-item")(1,"a",8),t.NdJ("click",function(){const c=t.CHM(e),u=c.$implicit,w=c.index;return t.oxw().goToDirectory(u,w)}),t._uU(2),t.qZA()()}if(2&r){const e=h.$implicit;t.xp6(2),t.Oqu(e.name)}}function k(r,h){if(1&r){const e=t.EpF();t.TgZ(0,"p",11),t.NdJ("click",function(){const u=t.CHM(e).$implicit,w=t.oxw().index;return t.oxw().entryDirectory(u,w)}),t._UZ(1,"i",12),t.TgZ(2,"span",13),t._uU(3),t.qZA(),t.TgZ(4,"i",14),t.NdJ("click",function(c){const w=t.CHM(e).$implicit,f=t.oxw().index;return t.oxw().previewFileHandler(w,c,f)}),t.qZA()()}if(2&r){const e=h.$implicit,i=t.oxw().index,c=t.oxw();t.ekj("selected",e.path===c.selectedDir.path&&!c.selectedFile||e===c.selectedFile)("sub-selected",i+1<c.pathArr.length&&e.path===c.pathArr[i+1].path),t.xp6(1),t.Q6J("type",e.directory?"icon1":"icon2"),t.xp6(2),t.Oqu(e.name),t.xp6(1),t.Q6J("hover",!1)("type",e.directory?"right-arrow":"eye")}}function Z(r,h){if(1&r&&(t.TgZ(0,"div",9),t.YNc(1,k,5,8,"p",10),t.qZA()),2&r){const e=h.$implicit;t.xp6(1),t.Q6J("ngForOf",e.children)}}function N(r,h){if(1&r){const e=t.EpF();t.TgZ(0,"div",15)(1,"div",16)(2,"dy-file-preview",17),t.NdJ("onPreview",function(c){return t.CHM(e),t.oxw().getData(c)}),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.TgZ(5,"h3"),t._uU(6,"\u4fe1\u606f"),t.qZA(),t.TgZ(7,"p")(8,"span"),t._uU(9,"\u521b\u5efa\u65f6\u95f4"),t.qZA(),t.TgZ(10,"span"),t._uU(11,"created time"),t.qZA()(),t.TgZ(12,"p")(13,"span"),t._uU(14,"\u4fee\u6539\u65f6\u95f4"),t.qZA(),t.TgZ(15,"span"),t._uU(16,"lastModifiedTime time"),t.qZA()()()()}if(2&r){const e=t.oxw();t.xp6(2),t.Q6J("fileName",(null==e.selectedFile?null:e.selectedFile.path.value)||(null==e.selectedFile?null:e.selectedFile.path))("charsetList",e.charsetList)("ngModel",e.fileContent),t.xp6(2),t.hij("",null==e.selectedFile?null:e.selectedFile.name," - size")}}function ct(r,h){if(1&r){const e=t.EpF();t.TgZ(0,"div",18)(1,"dy-file-preview",19),t.NdJ("onPreview",function(c){return t.CHM(e),t.oxw().getData(c)})("onClose",function(){return t.CHM(e),t.oxw().previewFile=null}),t.qZA()()}if(2&r){const e=t.oxw();t.Q6J("@slideInMotion",void 0),t.xp6(1),t.Q6J("fileName",(null==e.previewFile?null:e.previewFile.path.value)||(null==e.previewFile?null:e.previewFile.path))("charsetList",e.charsetList)("ngModel",e.fileContent)}}let st=(()=>{class r{constructor(e,i){this.api=e,this.i18n=i,this.params={path:"/",fileType:null},this.supportInfo="FileListDescriptor.listFiles",this.pathArr=[],this.variables=[]}get selectedDir(){return this.pathArr[this.pathArr.length-1]}ngOnInit(){this.charsetList=a.Ve.CharsetList,this.pathArr.push({name:this.i18n.translate("datasource.root"),path:"/",children:[]}),console.log(this.ioAction),(0,M.D)([this.api.getGraph(this.ioAction.processGraphId)]).subscribe({next:e=>{console.log(e)}})}goToDirectory(e,i){this.pathArr.length=i+1,this.selectedFile=null}entryDirectory(e,i){if(!e.directory)return this.pathArr.length=i+1,void(this.selectedFile=e);this.params.path=e.path,this.api.support({graph:this.graphXml,operatorId:this.ioAction.operatorId,params:JSON.stringify(this.params),supportInfo:this.supportInfo,variables:this.variables,processId:this.ioAction.processGraphId}).subscribe(c=>{this.pathArr.length=i+1,this.pathArr.push({name:e.name,path:e.path,children:c}),this.selectedFile=null,setTimeout(()=>{this.contentBox.nativeElement.scrollLeft=this.contentBox.nativeElement.scrollWidth})})}previewFileHandler(e,i,c){e.directory||(i.stopPropagation(),this.previewFile=e)}getData(e){const{name:i,size:c,charset:u,format:w}=e;this.api[`supportReadAs${w}`]({variables:this.variables},i,c,u).subscribe(f=>{this.fileContent=f})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(y.DQ),t.Y36(l.wi))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-dir-data"]],viewQuery:function(e,i){if(1&e&&t.Gf(m,5),2&e){let c;t.iGM(c=t.CRH())&&(i.contentBox=c.first)}},inputs:{ioAction:"ioAction"},decls:9,vars:4,consts:[[1,"container-box","pr"],[1,"path-box"],[4,"ngFor","ngForOf"],[1,"content-box"],["contentBox",""],["class","dir-box",4,"ngFor","ngForOf"],["class","quick-preview",4,"ngIf"],["class","file-preview pa",4,"ngIf"],[3,"click"],[1,"dir-box"],["class","pr",3,"selected","sub-selected","click",4,"ngFor","ngForOf"],[1,"pr",3,"click"],["dy-icon","",3,"type"],[1,"dir-name"],["dy-icon","",1,"pa",3,"hover","type","click"],[1,"quick-preview"],[1,"preview-box"],[3,"fileName","charsetList","ngModel","onPreview"],[1,"file-preview","pa"],[3,"fileName","charsetList","ngModel","onPreview","onClose"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"nz-breadcrumb"),t.YNc(3,b,3,1,"nz-breadcrumb-item",2),t.qZA()(),t.TgZ(4,"div",3,4),t.YNc(6,Z,2,1,"div",5),t.YNc(7,N,17,4,"div",6),t.qZA(),t.YNc(8,ct,2,4,"div",7),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngForOf",i.pathArr),t.xp6(3),t.Q6J("ngForOf",i.pathArr),t.xp6(1),t.Q6J("ngIf",i.selectedFile),t.xp6(1),t.Q6J("ngIf",i.previewFile))},directives:[s.Dg,O.sg,s.MO,n.kE,O.O5,n.wC,v.JJ,v.On],styles:[""]}),r})();var at=d(63677),it=d(64219),dt=d(82683),gt=d(61711),ht=d(72394),ut=d(65882),rt=d(63640);let _t=(()=>{class r{transform(e){return Number(e)<0?"\u672a\u77e5":e}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275pipe=t.Yjl({name:"minus",type:r,pure:!0}),r})(),pt=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[g.L,o.m,L.df]]}),r})();t.B6R(E.N,[n.kE,V.SY,O.O5,at.Ws,at.cm,at.RR,it.wO,O.sg,dt.w,it.r9,n.RG,n.MR,n.J3,C.N8,C.Om,C.$Z,C.Uo,C._C,C.qD,C.p0,Y,ot,gt.dE,F,ht.a,n.vf,v.JJ,v.On,ut.u,rt.du,rt.Hf,st],[l.o9,J.CT,_t])},58631:(q,A,d)=>{d.d(A,{u:()=>R});var o=d(5e3),t=d(14581),y=d(90459),n=d(50939),O=d(69808),C=d(31453);function v(x,D){1&x&&o._UZ(0,"i",10),2&x&&o.Q6J("fontsize",12)}function z(x,D){if(1&x){const _=o.EpF();o.TgZ(0,"tr",8),o.NdJ("click",function(){const E=o.CHM(_).$implicit;return o.oxw().handleClick(E)}),o.TgZ(1,"td"),o.YNc(2,v,1,1,"i",9),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td"),o._uU(8),o.qZA()()}if(2&x){const _=D.$implicit,P=o.oxw();o.ekj("selected",P.opTrackerId==_.id)("error",P.isError(_)),o.xp6(2),o.Q6J("ngIf",P.opTrackerId==_.id),o.xp6(2),o.Oqu(_.operatorId),o.xp6(2),o.Oqu(_.operatorAlias),o.xp6(2),o.Oqu(_.duration)}}function I(x,D){if(1&x&&(o.TgZ(0,"tr")(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td"),o._uU(8),o.qZA(),o.TgZ(9,"td"),o._uU(10),o.qZA(),o.TgZ(11,"td"),o._uU(12),o.qZA()()),2&x){const _=D.$implicit;o.xp6(2),o.Oqu(_.portName),o.xp6(2),o.Oqu(_.processedCount),o.xp6(2),o.Oqu(_.maxCachedCount),o.xp6(2),o.Oqu(_.inputRate),o.xp6(2),o.Oqu(_.outputRate),o.xp6(2),o.Oqu(_.packetCount)}}let R=(()=>{class x{constructor(_,P){this.api=_,this.fService=P,this.taskId="",this.selectEvent=new o.vpe,this.operatorData=[],this.portData=[]}ngOnInit(){this.api.operatorTrackerList(this.taskId).subscribe(_=>{this.operatorData=_,this.operatorData&&this.operatorData.length&&this.handleClick(this.operatorData[0])})}operatorTracker(_){this.api.operatorTracker(_).subscribe(P=>{this.operatorData=[...this.operatorData,P]}),this.portTrackerList(_)}portTrackerList(_){this.opTrackerId!==_&&(this.opTrackerId=_,this.api.portTrackerList(_).subscribe(P=>{this.portData=P}))}clear(){this.operatorData=[],this.portData=[]}handleClick(_){this.portTrackerList(_.id),this.selectEvent.emit(_.operatorId)}selectedOperatorHandler(_){var P;const F=null===(P=this.operatorData.find(E=>E.operatorId===_))||void 0===P?void 0:P.id;F&&this.portTrackerList(F)}isError(_){return this.fService.errorNodeIds.find(P=>P.id===_.operatorId)}}return x.\u0275fac=function(_){return new(_||x)(o.Y36(t.k5),o.Y36(y.W))},x.\u0275cmp=o.Xpm({type:x,selectors:[["app-run-state"]],inputs:{taskId:"taskId"},outputs:{selectEvent:"selectEvent"},decls:33,vars:6,consts:[[1,"operator-box","fl"],[3,"nzData","nzFrontPagination"],["operatorTable",""],["width","15px"],[3,"selected","error","click",4,"ngFor","ngForOf"],[1,"port-box","fr"],["portTable",""],[4,"ngFor","ngForOf"],[3,"click"],["dy-icon","","type","a-youshuangjiantou1",3,"fontsize",4,"ngIf"],["dy-icon","","type","a-youshuangjiantou1",3,"fontsize"]],template:function(_,P){if(1&_&&(o.TgZ(0,"div",0)(1,"nz-table",1,2)(3,"thead")(4,"tr"),o._UZ(5,"th",3),o.TgZ(6,"th"),o._uU(7,"\u5b9e\u4f8b\u540d"),o.qZA(),o.TgZ(8,"th"),o._uU(9,"\u7b97\u5b50\u540d"),o.qZA(),o.TgZ(10,"th"),o._uU(11,"\u8fd0\u884c\u65f6\u957f(ms)"),o.qZA()()(),o.TgZ(12,"tbody"),o.YNc(13,z,9,8,"tr",4),o.qZA()()(),o.TgZ(14,"div",5)(15,"nz-table",1,6)(17,"thead")(18,"tr")(19,"th"),o._uU(20,"\u7aef\u53e3\u540d"),o.qZA(),o.TgZ(21,"th"),o._uU(22,"\u6570\u636e\u91cf"),o.qZA(),o.TgZ(23,"th"),o._uU(24,"\u6700\u5927\u7f13\u5b58"),o.qZA(),o.TgZ(25,"th"),o._uU(26,"\u8f93\u5165\u901f\u7387"),o.qZA(),o.TgZ(27,"th"),o._uU(28,"\u8f93\u51fa\u901f\u7387"),o.qZA(),o.TgZ(29,"th"),o._uU(30,"\u96c6\u5408\u6570\u91cf"),o.qZA()()(),o.TgZ(31,"tbody"),o.YNc(32,I,13,6,"tr",7),o.qZA()()()),2&_){const F=o.MAs(2),E=o.MAs(16);o.xp6(1),o.Q6J("nzData",P.operatorData)("nzFrontPagination",!1),o.xp6(12),o.Q6J("ngForOf",F.data),o.xp6(2),o.Q6J("nzData",P.portData)("nzFrontPagination",!1),o.xp6(17),o.Q6J("ngForOf",E.data)}},directives:[n.N8,n.Om,n.$Z,n.Uo,n._C,n.p0,O.sg,O.O5,C.kE],styles:["html.default[_ngcontent-%COMP%]   html[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   body[_ngcontent-%COMP%]{min-width:1366px}html.default[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none}html.default[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin:0}html.default[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;flex:auto;flex-direction:column}html.default[_ngcontent-%COMP%]   .fdc[_ngcontent-%COMP%]{flex-direction:column}html.default[_ngcontent-%COMP%]   .fdr[_ngcontent-%COMP%]{flex-direction:row}html.default[_ngcontent-%COMP%]   .fauto[_ngcontent-%COMP%]{flex:auto}html.default[_ngcontent-%COMP%]   .pf[_ngcontent-%COMP%]{position:fixed}html.default[_ngcontent-%COMP%]   .pr[_ngcontent-%COMP%]{position:relative}html.default[_ngcontent-%COMP%]   .pa[_ngcontent-%COMP%]{position:absolute}html.default[_ngcontent-%COMP%]   .fl[_ngcontent-%COMP%]{float:left}html.default[_ngcontent-%COMP%]   .fr[_ngcontent-%COMP%]{float:right}html.default[_ngcontent-%COMP%]   .clear-f[_ngcontent-%COMP%]{clear:both}html.default[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#396669}html.default[_ngcontent-%COMP%]   .ant-table-pagination.ant-pagination[_ngcontent-%COMP%]{margin:0}html.default[_ngcontent-%COMP%]   .ant-pagination[_ngcontent-%COMP%]{text-align:right}html.default[_ngcontent-%COMP%]   .ant-table-column-sorter[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-table-filter-trigger[_ngcontent-%COMP%]{color:#a1a1a1}html.default[_ngcontent-%COMP%]   .ant-table-filter-trigger.active[_ngcontent-%COMP%]{color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-table-thead[_ngcontent-%COMP%]   th.ant-table-column-sort[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-table-thead[_ngcontent-%COMP%]   th.ant-table-column-has-sorters[_ngcontent-%COMP%]:hover{background:#e2eeee}html.default[_ngcontent-%COMP%]   .ant-tree-switcher[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-tree-indent-unit[_ngcontent-%COMP%]{width:17px;color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-tree[_ngcontent-%COMP%]   .ant-tree-node-content-wrapper[_ngcontent-%COMP%]{padding:0}html.default[_ngcontent-%COMP%]   .ant-tree-checkbox-inner[_ngcontent-%COMP%]{display:inline-block}html.default[_ngcontent-%COMP%]   .ant-select-tree[_ngcontent-%COMP%]   .ant-select-tree-node-content-wrapper.ant-select-tree-node-selected[_ngcontent-%COMP%]:hover{background-color:#e2eeee}html.default[_ngcontent-%COMP%]   .ant-modal-title[_ngcontent-%COMP%]{color:#396669}html.default[_ngcontent-%COMP%]   .ant-dropdown-menu-item-selected[_ngcontent-%COMP%], html.default[_ngcontent-%COMP%]   .ant-dropdown-menu-submenu-title-selected[_ngcontent-%COMP%]{background-color:#e2eeee}html.default[_ngcontent-%COMP%]   .ant-badge-status-processing[_ngcontent-%COMP%]{background-color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-badge-status-processing[_ngcontent-%COMP%]:after{border-color:#2a8b92}html.default[_ngcontent-%COMP%]   .ant-tooltip[_ngcontent-%COMP%]{max-width:550px;max-height:550px;overflow:hidden}html.default[_ngcontent-%COMP%]   .ant-tooltip-content[_ngcontent-%COMP%]{width:100%;height:100%;max-width:550px;max-height:542px}html.default[_ngcontent-%COMP%]   .ant-tooltip-inner[_ngcontent-%COMP%]{box-shadow:none}html.default   [_nghost-%COMP%]   .operator-box[_ngcontent-%COMP%], html.default   [_nghost-%COMP%]   .port-box[_ngcontent-%COMP%]{width:calc(50% - 5px);height:100%;overflow-y:auto}html.default   [_nghost-%COMP%]   .operator-box[_ngcontent-%COMP%]{padding-right:0}html.default   [_nghost-%COMP%]   .port-box[_ngcontent-%COMP%]{padding-left:0}html.default   [_nghost-%COMP%]     .ant-table>.ant-table-container>.ant-table-content>table>tbody>tr>td{padding:2px 4px}html.default   [_nghost-%COMP%]     .ant-table>.ant-table-container>.ant-table-content>table>thead>tr>th{padding:2px 4px}html.default   [_nghost-%COMP%]     th, html.default   [_nghost-%COMP%]     td{white-space:nowrap}html.default   [_nghost-%COMP%]     tr td{cursor:pointer}html.default   [_nghost-%COMP%]     tr.selected td{background-color:#e2eeee}html.default   [_nghost-%COMP%]     tr.error td{color:red}html.dark   [_nghost-%COMP%]   .operator-box[_ngcontent-%COMP%], html.dark   [_nghost-%COMP%]   .port-box[_ngcontent-%COMP%]{width:calc(50% - 5px);height:100%;overflow-y:auto}html.dark   [_nghost-%COMP%]   .operator-box[_ngcontent-%COMP%]{padding-right:0}html.dark   [_nghost-%COMP%]   .port-box[_ngcontent-%COMP%]{padding-left:0}html.dark   [_nghost-%COMP%]     .ant-table>.ant-table-container>.ant-table-content>table>tbody>tr>td{padding:2px 4px}html.dark   [_nghost-%COMP%]     .ant-table>.ant-table-container>.ant-table-content>table>thead>tr>th{padding:2px 4px}html.dark   [_nghost-%COMP%]     th, html.dark   [_nghost-%COMP%]     td{white-space:nowrap}html.dark   [_nghost-%COMP%]     tr td{cursor:pointer}html.dark   [_nghost-%COMP%]     tr.selected td{background-color:#e6edf7}html.dark   [_nghost-%COMP%]     tr.error td{color:red}html.light-blue   [_nghost-%COMP%]   .operator-box[_ngcontent-%COMP%], html.light-blue   [_nghost-%COMP%]   .port-box[_ngcontent-%COMP%]{width:calc(50% - 5px);height:100%;overflow-y:auto}html.light-blue   [_nghost-%COMP%]   .operator-box[_ngcontent-%COMP%]{padding-right:0}html.light-blue   [_nghost-%COMP%]   .port-box[_ngcontent-%COMP%]{padding-left:0}html.light-blue   [_nghost-%COMP%]     .ant-table>.ant-table-container>.ant-table-content>table>tbody>tr>td{padding:2px 4px}html.light-blue   [_nghost-%COMP%]     .ant-table>.ant-table-container>.ant-table-content>table>thead>tr>th{padding:2px 4px}html.light-blue   [_nghost-%COMP%]     th, html.light-blue   [_nghost-%COMP%]     td{white-space:nowrap}html.light-blue   [_nghost-%COMP%]     tr td{cursor:pointer}html.light-blue   [_nghost-%COMP%]     tr.selected td{background-color:#e0ebff}html.light-blue   [_nghost-%COMP%]     tr.error td{color:red}"]}),x})()},69376:(q,A,d)=>{d.d(A,{e:()=>y});var o=d(82886),t=d(5e3);let y=(()=>{class n{}return n.\u0275fac=function(C){return new(C||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[o.m]]}),n})()},81800:(q,A,d)=>{d.d(A,{c:()=>n});var o=d(5e3),t=d(14581),y=d(72394);let n=(()=>{class O{constructor(v){this.api=v,this.columns=[{i18n:"\u53d8\u91cf\u540d",field:"name"},{i18n:"\u53d8\u91cf\u503c",field:"value"}]}ngOnInit(){}ngOnChanges(v){!this.taskId||this.api.getJobTaskVariables(this.taskId).subscribe(z=>{try{this.data=[];const I=JSON.parse(z),R=[];Object.keys(I).map(x=>{R.push({name:x,value:I[x]})}),this.data=R}catch(I){}})}}return O.\u0275fac=function(v){return new(v||O)(o.Y36(t.k5))},O.\u0275cmp=o.Xpm({type:O,selectors:[["app-run-variable"]],inputs:{taskId:"taskId"},features:[o.TTD],decls:1,vars:2,consts:[["size","small",3,"columns","data"]],template:function(v,z){1&v&&o._UZ(0,"app-table",0),2&v&&o.Q6J("columns",z.columns)("data",z.data)},directives:[y.a],styles:[""]}),O})()},55786:(q,A,d)=>{d.d(A,{v:()=>y});var o=d(82886),t=d(5e3);let y=(()=>{class n{}return n.\u0275fac=function(C){return new(C||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[o.m]]}),n})()}}]);