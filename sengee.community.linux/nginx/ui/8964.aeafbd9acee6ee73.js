"use strict";(self.webpackChunksengee_ui=self.webpackChunksengee_ui||[]).push([[8964],{58964:(A,d,e)=>{e.r(d),e.d(d,{LoginModule:()=>w});var p=e(69808),r=e(93075),f=e(77152),C=e(76042),h=e(16114),l=e(64546),m=e(11047),u=e(57781),M=e(47910),v=e(63199),n=e(5e3),O=e(90056),P=e(49727),b=e(62545),x=e(41894),z=e(82683),F=e(92643);function Z(t,g){if(1&t&&(n.TgZ(0,"div",26),n._uU(1),n.qZA()),2&t){const o=n.oxw();n.xp6(1),n.Oqu(o.title)}}function _(t,g){if(1&t&&n._UZ(0,"img",28),2&t){const o=n.oxw(2);n.Q6J("src","../../../assets/logo/"+o.logo,n.LSH)}}function T(t,g){if(1&t&&n.YNc(0,_,1,1,"img",27),2&t){const o=n.oxw();n.Q6J("ngIf",o.showLogo)}}const S=[{path:"",component:(()=>{class t{constructor(o,i,s,c){this.fb=o,this.api=i,this.message=s,this.userSer=c,this.logo=v.N.loginLogo,this.showLogo=v.N.showLogo,this.copyright=`Copyright \xa9 ${(new Date).getFullYear()} ${window.datayoo}`,this.title=window.title}ngOnInit(){this.year=(0,M.Z)(new Date,"yyyy");const o=JSON.parse(localStorage.getItem("s_userInfo")||"null");let i=(null==o?void 0:o.password)||"";i&&(i=(0,u.Jk)(i)),this.validateForm=this.fb.group({userName:[(null==o?void 0:o.userName)||"",[r.kI.required]],password:[i||"",[r.kI.required]],verifyCode:["",[r.kI.required]],remember:[!0]})}ngAfterViewInit(){this.gVerify=new GVerify({id:"verifyCodeDom"})}submitForm(){if(!this.validateForm.valid)return void Object.values(this.validateForm.controls).forEach(a=>{a.invalid&&(a.markAsDirty(),a.updateValueAndValidity({onlySelf:!0}))});const{userName:o,password:i,verifyCode:s,remember:c}=this.validateForm.value;if(!this.gVerify.validate(s))return this.message.error("\u9a8c\u8bc1\u7801\u8f93\u5165\u9519\u8bef\uff01"),this.validateForm.patchValue({verifyCode:""},{emitEvent:!1}),void this.gVerify.refresh();const y=(0,u.To)(i);this.api.login(o,y).subscribe({next:a=>{c?localStorage.setItem("s_userInfo",JSON.stringify({userName:o,password:y})):localStorage.removeItem("s_userInfo"),(0,u.d8)("s_accessToken",a.accessToken),(0,u.d8)("s_refreshToken",a.refreshToken),this.userSer.init()},error:a=>{this.validateForm.patchValue({verifyCode:""},{emitEvent:!1}),this.gVerify.refresh()}})}}return t.\u0275fac=function(o){return new(o||t)(n.Y36(r.qu),n.Y36(O.z9),n.Y36(P.dD),n.Y36(b.KD))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-login"]],decls:45,vars:8,consts:[[1,"login-box"],[1,"mask"],[1,"top"],[1,"header"],["class","title",4,"ngIf","ngIfElse"],["imgTemp",""],[1,"main"],["nz-form","",1,"login-form",3,"formGroup","ngSubmit"],["nzErrorTip","\u8bf7\u8f93\u5165\u7528\u6237\u540d\uff01"],["type","text","nz-input","","formControlName","userName","placeholder","\u8bf7\u8f93\u5165\u7528\u6237\u540d"],["nzErrorTip","\u8bf7\u8f93\u5165\u5bc6\u7801\uff01"],["type","password","nz-input","","formControlName","password","placeholder","\u8bf7\u8f93\u5165\u5bc6\u7801"],["nzErrorTip","\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801\uff01"],[1,"verify-code-input"],["type","text","nz-input","","formControlName","verifyCode","placeholder","\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"],["id","verifyCodeDom",1,"verify-code"],["nz-row","",1,"login-form-margin"],["nz-col","",3,"nzSpan"],["nz-checkbox","","formControlName","remember"],["routerLink","/register",1,"login-form-forgot"],["routerLink","/resetpwd",1,"login-form-forgot"],["nz-button","",1,"login-form-button","login-form-margin",3,"nzType"],[1,"footer"],[1,"links"],["href","javascript:void(0);"],[1,"copyright"],[1,"title"],["alt","",3,"src",4,"ngIf"],["alt","",3,"src"]],template:function(o,i){if(1&o&&(n.TgZ(0,"div",0),n._UZ(1,"div",1),n.TgZ(2,"div",2)(3,"div",3),n.YNc(4,Z,2,1,"div",4),n.YNc(5,T,1,1,"ng-template",null,5,n.W1O),n.qZA()(),n.TgZ(7,"div",6)(8,"form",7),n.NdJ("ngSubmit",function(){return i.submitForm()}),n.TgZ(9,"nz-form-item")(10,"nz-form-control",8)(11,"nz-input-group"),n._UZ(12,"input",9),n.qZA()()(),n.TgZ(13,"nz-form-item")(14,"nz-form-control",10)(15,"nz-input-group"),n._UZ(16,"input",11),n.qZA()()(),n.TgZ(17,"nz-form-item")(18,"nz-form-control",12)(19,"nz-input-group",13),n._UZ(20,"input",14),n.qZA(),n._UZ(21,"p",15),n.qZA()(),n.TgZ(22,"div",16)(23,"div",17)(24,"label",18)(25,"span"),n._uU(26,"\u8bb0\u4f4f\u6211"),n.qZA()()(),n.TgZ(27,"div",17)(28,"a",19),n._uU(29,"\u6ce8\u518c\u8d26\u6237"),n.qZA()(),n.TgZ(30,"div",17)(31,"a",20),n._uU(32,"\u5fd8\u8bb0\u5bc6\u7801"),n.qZA()()(),n.TgZ(33,"button",21),n._uU(34,"\u767b \u5f55"),n.qZA()()(),n.TgZ(35,"div",22)(36,"div",23)(37,"a",24),n._uU(38,"\u5e2e\u52a9"),n.qZA(),n.TgZ(39,"a",24),n._uU(40,"\u9690\u79c1"),n.qZA(),n.TgZ(41,"a",24),n._uU(42,"\u6761\u6b3e"),n.qZA()(),n.TgZ(43,"div",25),n._uU(44),n.qZA()()()),2&o){const s=n.MAs(6);n.xp6(4),n.Q6J("ngIf",i.title)("ngIfElse",s),n.xp6(4),n.Q6J("formGroup",i.validateForm),n.xp6(15),n.Q6J("nzSpan",16),n.xp6(4),n.Q6J("nzSpan",4),n.xp6(3),n.Q6J("nzSpan",4),n.xp6(3),n.Q6J("nzType","primary"),n.xp6(11),n.hij(" ",i.copyright," ")}},directives:[p.O5,r._Y,r.JL,l.Lr,r.sg,x.SK,l.Nx,x.t3,l.Fd,m.gB,z.w,m.Zp,r.Fj,r.JJ,r.u,h.Ie,f.yS,C.ix,F.dQ],styles:[".login-box[_ngcontent-%COMP%]{width:100%;min-height:100%;background:var(--login-bg) url(login-bg.ed05d5bdf866ab00.svg) no-repeat 50%;background-size:100%;padding:110px 0 144px;position:relative}.login-box[_ngcontent-%COMP%]   .mask[_ngcontent-%COMP%]{position:absolute;width:100%;height:calc(100% - 110px);background-color:var(--login-mask-bg)}.login-box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{height:36px;line-height:36px;text-align:center;margin-bottom:120px;position:relative}.login-box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:290px;vertical-align:top;border-style:none}.login-box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:33px;color:#000000d9;font-family:Chinese Quote,-apple-system,BlinkMacSystemFont,Segoe UI,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Helvetica Neue,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-weight:600;position:relative;top:2px}.login-box[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{min-width:260px;width:380px;margin:0 auto}.login-box[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{width:100%}.login-box[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .login-form-margin[_ngcontent-%COMP%]{margin-bottom:16px;align-items:center;justify-content:space-between}.login-box[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .login-form-forgot[_ngcontent-%COMP%]{float:right}.login-box[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .login-form-button[_ngcontent-%COMP%]{width:100%}.login-box[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]     .ant-form-item-control-input-content{display:flex}.login-box[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .verify-code-input[_ngcontent-%COMP%]{width:280px}.login-box[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .verify-code[_ngcontent-%COMP%]{width:100px;height:32px;margin-bottom:0}.login-box[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{position:absolute;width:100%;bottom:0;padding:0 16px;margin:48px 0 24px;text-align:center}.login-box[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]{margin-bottom:8px;font-size:14px}.login-box[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:not(:last-child){margin-right:20px}.login-box[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .copyright[_ngcontent-%COMP%]{color:#00000073;font-size:14px}"]}),t})()}];let w=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[p.ez,r.u5,r.UX,l.U5,m.o7,C.sL,h.Wr,f.Bz.forChild(S)]]}),t})()}}]);